<!DOCTYPE html>
<html class="writer-html5" lang="zh-CN" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>6. é™„å½• &mdash; Horizon J5 AI Toolchain User Guide  æ–‡æ¡£</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/custom-style.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/translations.js"></script>
        <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
        <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="ç´¢å¼•" href="genindex.html" />
    <link rel="search" title="æœç´¢" href="search.html" />
    <link rel="prev" title="5. DSPå¼€å‘æ–‡æ¡£" href="dsp.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> Horizon J5 AI Toolchain User Guide
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="åœ¨æ–‡æ¡£ä¸­æœç´¢" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">æœ¬æ‰‹å†Œç›®å½•ç»“æ„:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="product_introduction.html">1. äº§å“ä»‹ç»</a></li>
<li class="toctree-l1"><a class="reference internal" href="env_prepare.html">2. ç¯å¢ƒéƒ¨ç½²</a></li>
<li class="toctree-l1"><a class="reference internal" href="ptq_solution.html">3. PTQæµ®ç‚¹å®šç‚¹æ¨¡å‹è½¬æ¢æ–¹æ¡ˆ</a></li>
<li class="toctree-l1"><a class="reference internal" href="application_development.html">4. runtimeåº”ç”¨å¼€å‘</a></li>
<li class="toctree-l1"><a class="reference internal" href="dsp.html">5. DSPå¼€å‘æ–‡æ¡£</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">6. é™„å½•</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#benchmark">6.1. æ¨¡å‹æ€§èƒ½Benchmark</a></li>
<li class="toctree-l2"><a class="reference internal" href="#norm-type">6.2. norm_type é…ç½®è¯´æ˜</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id2">6.2.1. å‚æ•°è¯´æ˜è§£æ</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id3">6.2.2. è®¡ç®—å…¬å¼åŠç¤ºä¾‹è¯´æ˜</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id4">6.2.2.1. æ¨¡å‹è®­ç»ƒæ—¶çš„æ•°æ®æ ‡å‡†åŒ–å¤„ç†è®¡ç®—å…¬å¼</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id5">6.2.2.2. æ¨¡å‹æ¨ç†æ—¶çš„è®¡ç®—å…¬å¼</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#transformer">6.3. transformerè¯´æ˜</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#addtransformer">6.3.1. AddTransformer</a></li>
<li class="toctree-l3"><a class="reference internal" href="#meantransformer">6.3.2. MeanTransformer</a></li>
<li class="toctree-l3"><a class="reference internal" href="#scaletransformer">6.3.3. ScaleTransformer</a></li>
<li class="toctree-l3"><a class="reference internal" href="#normalizetransformer">6.3.4. NormalizeTransformer</a></li>
<li class="toctree-l3"><a class="reference internal" href="#transposetransformer">6.3.5. TransposeTransformer</a></li>
<li class="toctree-l3"><a class="reference internal" href="#hwc2chwtransformer">6.3.6. HWC2CHWTransformer</a></li>
<li class="toctree-l3"><a class="reference internal" href="#chw2hwctransformer">6.3.7. CHW2HWCTransformer</a></li>
<li class="toctree-l3"><a class="reference internal" href="#centercroptransformer">6.3.8. CenterCropTransformer</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pilcentercroptransformer">6.3.9. PILCenterCropTransformer</a></li>
<li class="toctree-l3"><a class="reference internal" href="#longsidecroptransformer">6.3.10. LongSideCropTransformer</a></li>
<li class="toctree-l3"><a class="reference internal" href="#padresizetransformer">6.3.11. PadResizeTransformer</a></li>
<li class="toctree-l3"><a class="reference internal" href="#resizetransformer">6.3.12. ResizeTransformer</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pilresizetransformer">6.3.13. PILResizeTransformer</a></li>
<li class="toctree-l3"><a class="reference internal" href="#shortlongresizetransformer">6.3.14. ShortLongResizeTransformer</a></li>
<li class="toctree-l3"><a class="reference internal" href="#padtransformer">6.3.15. PadTransformer</a></li>
<li class="toctree-l3"><a class="reference internal" href="#shortsideresizetransformer">6.3.16. ShortSideResizeTransformer</a></li>
<li class="toctree-l3"><a class="reference internal" href="#paddedcentercroptransformer">6.3.17. PaddedCenterCropTransformer</a></li>
<li class="toctree-l3"><a class="reference internal" href="#bgr2rgbtransformer">6.3.18. BGR2RGBTransformer</a></li>
<li class="toctree-l3"><a class="reference internal" href="#rgb2bgrtransformer">6.3.19. RGB2BGRTransformer</a></li>
<li class="toctree-l3"><a class="reference internal" href="#rgb2graytransformer">6.3.20. RGB2GRAYTransformer</a></li>
<li class="toctree-l3"><a class="reference internal" href="#bgr2graytransformer">6.3.21. BGR2GRAYTransformer</a></li>
<li class="toctree-l3"><a class="reference internal" href="#rgb2gray-128transformer">6.3.22. RGB2GRAY_128Transformer</a></li>
<li class="toctree-l3"><a class="reference internal" href="#rgb2yuv444transformer">6.3.23. RGB2YUV444Transformer</a></li>
<li class="toctree-l3"><a class="reference internal" href="#bgr2yuv444transformer">6.3.24. BGR2YUV444Transformer</a></li>
<li class="toctree-l3"><a class="reference internal" href="#bgr2yuv444-128transformer">6.3.25. BGR2YUV444_128Transformer</a></li>
<li class="toctree-l3"><a class="reference internal" href="#rgb2yuv444-128transformer">6.3.26. RGB2YUV444_128Transformer</a></li>
<li class="toctree-l3"><a class="reference internal" href="#bgr2yuvbt601videotransformer">6.3.27. BGR2YUVBT601VIDEOTransformer</a></li>
<li class="toctree-l3"><a class="reference internal" href="#rgb2yuvbt601videotransformer">6.3.28. RGB2YUVBT601VIDEOTransformer</a></li>
<li class="toctree-l3"><a class="reference internal" href="#yuvtransformer">6.3.29. YUVTransformer</a></li>
<li class="toctree-l3"><a class="reference internal" href="#reducechanneltransformer">6.3.30. ReduceChannelTransformer</a></li>
<li class="toctree-l3"><a class="reference internal" href="#bgr2nv12transformer">6.3.31. BGR2NV12Transformer</a></li>
<li class="toctree-l3"><a class="reference internal" href="#rgb2nv12transformer">6.3.32. RGB2NV12Transformer</a></li>
<li class="toctree-l3"><a class="reference internal" href="#nv12toyuv444transformer">6.3.33. NV12ToYUV444Transformer</a></li>
<li class="toctree-l3"><a class="reference internal" href="#warpaffinetransformer">6.3.34. WarpAffineTransformer</a></li>
<li class="toctree-l3"><a class="reference internal" href="#f32tos8transformer">6.3.35. F32ToS8Transformer</a></li>
<li class="toctree-l3"><a class="reference internal" href="#f32tou8transformer">6.3.36. F32ToU8Transformer</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id6">6.4. å¸¸è§æ•…éšœå¤„ç†</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#hb-mapper-checker">6.4.1. hb_mapper checker å¸¸è§æ•…éšœ</a></li>
<li class="toctree-l3"><a class="reference internal" href="#hb-mapper-makertbin">6.4.2. hb_mapper makertbinå¸¸è§æ•…éšœ</a></li>
<li class="toctree-l3"><a class="reference internal" href="#hb-model-modifier">6.4.3. hb_model_modifierå¸¸è§æ•…éšœ</a></li>
<li class="toctree-l3"><a class="reference internal" href="#hb-model-verifier">6.4.4. hb_model_verifierå¸¸è§æ•…éšœ</a></li>
<li class="toctree-l3"><a class="reference internal" href="#hb-onnxruntime">6.4.5. hb_onnxruntimeå¸¸è§æ•…éšœ</a></li>
<li class="toctree-l3"><a class="reference internal" href="#libdnn">6.4.6. libDNNå¸¸è§æ•…éšœ</a></li>
</ul>
</li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Horizon J5 AI Toolchain User Guide</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
      <li><span class="section-number">6. </span>é™„å½•</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="id1">
<h1><span class="section-number">6. </span>é™„å½•<a class="headerlink" href="#id1" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">ïƒ</a></h1>
<section id="benchmark">
<h2><span class="section-number">6.1. </span>æ¨¡å‹æ€§èƒ½Benchmark<a class="headerlink" href="#benchmark" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">ïƒ</a></h2>
<p><strong>è¯´æ˜</strong></p>
<blockquote>
<div><ul class="simple">
<li><p>æµ‹è¯•æ¡ä»¶ï¼š</p>
<ul>
<li><p>æµ‹è¯•å¼€å‘æ¿ï¼šJ5-DVB boardã€‚</p></li>
<li><p>æµ‹è¯•æ ¸å¿ƒæ•°ï¼šlatencyå•æ ¸ï¼ŒfpsåŒæ ¸ã€‚</p></li>
<li><p>æ€§èƒ½æ•°æ®è·å–é¢‘ç‡è®¾ç½®ä¸ºï¼šæ¯5åˆ†é’Ÿè·å–ä¸€æ¬¡æ€§èƒ½å‚æ•°ï¼Œå–å¹³å‡å€¼ã€‚</p></li>
</ul>
</li>
<li><p>è¡¨å¤´ç¼©å†™ï¼š</p>
<ul>
<li><p>C = è®¡ç®—é‡ï¼Œå•ä½ä¸ºGOPsï¼ˆåäº¿æ¬¡è¿ç®—/ç§’ï¼‰ã€‚æ­¤æ•°æ®é€šè¿‡ <code class="docutils literal notranslate"><span class="pre">hb_perf</span></code> å·¥å…·è·å¾—ã€‚</p></li>
<li><p>FPS = æ¯ç§’å¸§ç‡ã€‚æ­¤æ•°æ®åœ¨å¼€å‘æ¿å•çº¿ç¨‹è¿è¡Œai_benchmark_j5ç¤ºä¾‹åŒ…/scriptè·¯å¾„ä¸‹å„æ¨¡å‹å­æ–‡ä»¶å¤¹çš„ <strong>latency.sh</strong> è„šæœ¬è·å–ï¼Œä¸å«åå¤„ç†ã€‚</p></li>
<li><p>ITC = æ¨ç†è€—æ—¶ã€‚æ­¤æ•°æ®åœ¨å¼€å‘æ¿å•çº¿ç¨‹è¿è¡Œai_benchmark_j5ç¤ºä¾‹åŒ…/scriptè·¯å¾„ä¸‹å„æ¨¡å‹å­æ–‡ä»¶å¤¹çš„ <strong>latency.sh</strong> è„šæœ¬è·å–ï¼Œä¸å«åå¤„ç†ã€‚</p></li>
<li><p>TCPP = åå¤„ç†è€—æ—¶ã€‚æ­¤æ•°æ®åœ¨å¼€å‘æ¿å•çº¿ç¨‹è¿è¡Œai_benchmark_j5ç¤ºä¾‹åŒ…/scriptè·¯å¾„ä¸‹å„æ¨¡å‹å­æ–‡ä»¶å¤¹çš„ <strong>latency.sh</strong> è„šæœ¬è·å–ã€‚</p></li>
<li><p>RV = å•å¸§è¯»å–æ•°æ®é‡ã€‚æ­¤æ•°æ®é€šè¿‡ <code class="docutils literal notranslate"><span class="pre">hb_perf</span></code> å·¥å…·è·å¾—ã€‚</p></li>
<li><p>WV = å•å¸§å†™å…¥æ•°æ®é‡ã€‚æ­¤æ•°æ®é€šè¿‡ <code class="docutils literal notranslate"><span class="pre">hb_perf</span></code> å·¥å…·è·å¾—ã€‚</p></li>
</ul>
</li>
</ul>
</div></blockquote>
<table class="docutils align-center">
<colgroup>
<col style="width: 13%" />
<col style="width: 6%" />
<col style="width: 5%" />
<col style="width: 5%" />
<col style="width: 5%" />
<col style="width: 6%" />
<col style="width: 5%" />
<col style="width: 5%" />
<col style="width: 5%" />
<col style="width: 11%" />
<col style="width: 34%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><strong>MODEL NAME</strong></p></td>
<td><p><strong>INPUT SIZE</strong></p></td>
<td><p><strong>C(GOPs)</strong></p></td>
<td><p><strong>FPS</strong></p></td>
<td><p><strong>ITC(ms)</strong></p></td>
<td><p><strong>TCPP(ms)</strong></p></td>
<td><p><strong>RV(mb)</strong></p></td>
<td><p><strong>WV(mb)</strong></p></td>
<td><p><strong>Dataset</strong></p></td>
<td><p><strong>ACCURACY</strong></p></td>
<td><p><strong>LINKS</strong></p></td>
</tr>
<tr class="row-even"><td><p><strong>MobileNetv1</strong></p></td>
<td><p>1x224x224x3</p></td>
<td><p>1.14</p></td>
<td><p>3444.67</p></td>
<td><p>0.996</p></td>
<td><p>0.077</p></td>
<td><p>4.07</p></td>
<td><p>0.13</p></td>
<td><p>ImageNet</p></td>
<td><p>Top1:
0.7061(FLOAT)/0.7024(INT8)</p></td>
<td><p><a class="reference external" href="https://github.com/shicai/MobileNet-Caffe">https://github.com/shicai/MobileNet-Caffe</a></p></td>
</tr>
<tr class="row-odd"><td><p><strong>MobileNetv2</strong></p></td>
<td><p>1x224x224x3</p></td>
<td><p>0.86</p></td>
<td><p>3477.34</p></td>
<td><p>0.923</p></td>
<td><p>0.070</p></td>
<td><p>3.68</p></td>
<td><p>0.02</p></td>
<td><p>ImageNet</p></td>
<td><p>Top1:
0.7167(FLOAT)/0.7117(INT8)</p></td>
<td><p><a class="reference external" href="https://github.com/shicai/MobileNet-Caffe">https://github.com/shicai/MobileNet-Caffe</a></p></td>
</tr>
<tr class="row-even"><td><p><strong>GoogleNet</strong></p></td>
<td><p>1x224x224x3</p></td>
<td><p>3.00</p></td>
<td><p>2179.51</p></td>
<td><p>1.192</p></td>
<td><p>0.071</p></td>
<td><p>6.55</p></td>
<td><p>0.10</p></td>
<td><p>ImageNet</p></td>
<td><p>Top1:
0.7001(FLOAT)/0.6990(INT8)</p></td>
<td><p><a class="reference external" href="https://github.com/HorizonRobotics-Platform/ModelZoo/tree/master/GoogleNet">https://github.com/HorizonRobotics-Platform/ModelZoo/tree/master/GoogleNet</a></p></td>
</tr>
<tr class="row-odd"><td><p><strong>Resnet18</strong></p></td>
<td><p>1x224x224x3</p></td>
<td><p>3.65</p></td>
<td><p>1483.80</p></td>
<td><p>1.656</p></td>
<td><p>0.070</p></td>
<td><p>10.56</p></td>
<td><p>0.12</p></td>
<td><p>ImageNet</p></td>
<td><p>Top1:
0.6836(FLOAT)/0.6826(INT8)</p></td>
<td><p><a class="reference external" href="https://github.com/HolmesShuan/ResNet-18-Caffemodel-on-ImageNet">https://github.com/HolmesShuan/ResNet-18-Caffemodel-on-ImageNet</a></p></td>
</tr>
<tr class="row-even"><td><p><strong>EfficientNet-Lite0</strong></p></td>
<td><p>1x224x224x3</p></td>
<td><p>0.77</p></td>
<td><p>2720.59</p></td>
<td><p>1.093</p></td>
<td><p>0.070</p></td>
<td><p>5.08</p></td>
<td><p>0.02</p></td>
<td><p>ImageNet</p></td>
<td><p>Top1:
0.7491(FLOAT)/0.7475(INT8)</p></td>
<td><p><a class="reference external" href="https://github.com/tensorflow/tpu/tree/master/models/official/efficientnet/lite">https://github.com/tensorflow/tpu/tree/master/models/official/efficientnet/lite</a></p></td>
</tr>
<tr class="row-odd"><td><p><strong>EfficientNet-Lite1</strong></p></td>
<td><p>1x240x240x3</p></td>
<td><p>1.20</p></td>
<td><p>2257.96</p></td>
<td><p>1.774</p></td>
<td><p>0.071</p></td>
<td><p>5.85</p></td>
<td><p>0.02</p></td>
<td><p>ImageNet</p></td>
<td><p>Top1:
0.7647(FLOAT)/0.7624(INT8)</p></td>
<td><p><a class="reference external" href="https://github.com/tensorflow/tpu/tree/master/models/official/efficientnet/lite">https://github.com/tensorflow/tpu/tree/master/models/official/efficientnet/lite</a></p></td>
</tr>
<tr class="row-even"><td><p><strong>EfficientNet-Lite2</strong></p></td>
<td><p>1x260x260x3</p></td>
<td><p>1.72</p></td>
<td><p>2060.29</p></td>
<td><p>1.330</p></td>
<td><p>0.071</p></td>
<td><p>6.64</p></td>
<td><p>0.02</p></td>
<td><p>ImageNet</p></td>
<td><p>Top1:
0.7738(FLOAT)/0.7715(INT8)</p></td>
<td><p><a class="reference external" href="https://github.com/tensorflow/tpu/tree/master/models/official/efficientnet/lite">https://github.com/tensorflow/tpu/tree/master/models/official/efficientnet/lite</a></p></td>
</tr>
<tr class="row-odd"><td><p><strong>EfficientNet-Lite3</strong></p></td>
<td><p>1x280x280x3</p></td>
<td><p>2.77</p></td>
<td><p>1566.11</p></td>
<td><p>1.621</p></td>
<td><p>0.071</p></td>
<td><p>9.00</p></td>
<td><p>0.02</p></td>
<td><p>ImageNet</p></td>
<td><p>Top1:
0.7922(FLOAT)/0.7905(INT8)</p></td>
<td><p><a class="reference external" href="https://github.com/tensorflow/tpu/tree/master/models/official/efficientnet/lite">https://github.com/tensorflow/tpu/tree/master/models/official/efficientnet/lite</a></p></td>
</tr>
<tr class="row-even"><td><p><strong>EfficientNet-Lite4</strong></p></td>
<td><p>1x300x300x3</p></td>
<td><p>5.11</p></td>
<td><p>1037.61</p></td>
<td><p>2.265</p></td>
<td><p>0.071</p></td>
<td><p>13.91</p></td>
<td><p>0.02</p></td>
<td><p>ImageNet</p></td>
<td><p>Top1:
0.8070(FLOAT)/0.8052(INT8)</p></td>
<td><p><a class="reference external" href="https://github.com/tensorflow/tpu/tree/master/models/official/efficientnet/lite">https://github.com/tensorflow/tpu/tree/master/models/official/efficientnet/lite</a></p></td>
</tr>
<tr class="row-odd"><td><p><strong>Vargconvnet</strong></p></td>
<td><p>1x224x224x3</p></td>
<td><p>9.06</p></td>
<td><p>1495.77</p></td>
<td><p>1.622</p></td>
<td><p>0.071</p></td>
<td><p>9.14</p></td>
<td><p>0.11</p></td>
<td><p>ImageNet</p></td>
<td><p>Top1:
0.7790(FLOAT)/0.7787(INT8)</p></td>
<td><p><a class="reference external" href="https://github.com/HorizonRobotics-Platform/ModelZoo/tree/master/VargNet">https://github.com/HorizonRobotics-Platform/ModelZoo/tree/master/VargNet</a></p></td>
</tr>
<tr class="row-even"><td><p><strong>Efficientnasnet_m</strong></p></td>
<td><p>1x300x300x3</p></td>
<td><p>4.53</p></td>
<td><p>1108.70</p></td>
<td><p>2.076</p></td>
<td><p>0.071</p></td>
<td><p>13.26</p></td>
<td><p>0.04</p></td>
<td><p>ImageNet</p></td>
<td><p>Top1:
0.8009(FLOAT)/0.7925(INT8)</p></td>
<td><p><a class="reference external" href="https://github.com/HorizonRobotics-Platform/ModelZoo/tree/master/EfficientnasNet">https://github.com/HorizonRobotics-Platform/ModelZoo/tree/master/EfficientnasNet</a></p></td>
</tr>
<tr class="row-odd"><td><p><strong>Efficientnasnet_s</strong></p></td>
<td><p>1x280x280x3</p></td>
<td><p>1.44</p></td>
<td><p>2650.49</p></td>
<td><p>1.055</p></td>
<td><p>0.071</p></td>
<td><p>5.22</p></td>
<td><p>0.004096</p></td>
<td><p>ImageNet</p></td>
<td><p>Top1:
0.7573(FLOAT)/0.7508(INT8)</p></td>
<td><p><a class="reference external" href="https://github.com/HorizonRobotics-Platform/ModelZoo/tree/master/EfficientnasNet">https://github.com/HorizonRobotics-Platform/ModelZoo/tree/master/EfficientnasNet</a></p></td>
</tr>
<tr class="row-even"><td><p><strong>YOLOv2_Darknet19</strong></p></td>
<td><p>1x608x608x3</p></td>
<td><p>62.94</p></td>
<td><p>277.444</p></td>
<td><p>7.131</p></td>
<td><p>1.670</p></td>
<td><p>46.71</p></td>
<td><p>2.01</p></td>
<td><p>COCO</p></td>
<td><p>[IoU=0.50:0.95]=
0.276(FLOAT)/0.271(INT8)</p></td>
<td><p><a class="reference external" href="https://pjreddie.com/darknet/yolo">https://pjreddie.com/darknet/yolo</a></p></td>
</tr>
<tr class="row-odd"><td><p><strong>YOLOv3_Darknet53</strong></p></td>
<td><p>1x416x416x3</p></td>
<td><p>65.90</p></td>
<td><p>202.192</p></td>
<td><p>9.811</p></td>
<td><p>9.957</p></td>
<td><p>59.87</p></td>
<td><p>6.90</p></td>
<td><p>COCO</p></td>
<td><p>[IoU=0.50:0.95]=
0.333(FLOAT)/0.330(INT8)</p></td>
<td><p><a class="reference external" href="https://github.com/ChenYingpeng/caffe-yolov3">https://github.com/ChenYingpeng/caffe-yolov3</a></p></td>
</tr>
<tr class="row-even"><td><p><strong>YOLOv5x</strong></p></td>
<td><p>1x672x672x3</p></td>
<td><p>243.92</p></td>
<td><p>72.0124</p></td>
<td><p>27.069</p></td>
<td><p>5.912</p></td>
<td><p>123.07</p></td>
<td><p>43.93</p></td>
<td><p>COCO</p></td>
<td><p>[IoU=0.50:0.95]=
0.480(FLOAT)/0.464(INT8)</p></td>
<td><p><a class="reference external" href="https://github.com/ultralytics/yolov5/releases/tag/v2.0">https://github.com/ultralytics/yolov5/releases/tag/v2.0</a></p></td>
</tr>
<tr class="row-odd"><td><p><strong>Ssd_mobilenetv1</strong></p></td>
<td><p>1x300x300x3</p></td>
<td><p>2.30</p></td>
<td><p>2181.49</p></td>
<td><p>1.076</p></td>
<td><p>1.109</p></td>
<td><p>5.85</p></td>
<td><p>0.20</p></td>
<td><p>VOC</p></td>
<td><p>mAP:
0.7342(FLOAT)/0.7209(INT8)</p></td>
<td><p><a class="reference external" href="https://github.com/chuanqi305/MobileNet-SSD">https://github.com/chuanqi305/MobileNet-SSD</a></p></td>
</tr>
<tr class="row-even"><td><p><strong>Centernet_resnet101</strong></p></td>
<td><p>1x512x512x3</p></td>
<td><p>90.53</p></td>
<td><p>250.524</p></td>
<td><p>6.681</p></td>
<td><p>21.386</p></td>
<td><p>53.05</p></td>
<td><p>13.76</p></td>
<td><p>COCO</p></td>
<td><p>[IoU=0.50:0.95]=
0.342(FLOAT)/0.331(INT8)</p></td>
<td><p><a class="reference external" href="https://github.com/HorizonRobotics-Platform/ModelZoo/tree/master/Centernet">https://github.com/HorizonRobotics-Platform/ModelZoo/tree/master/Centernet</a></p></td>
</tr>
<tr class="row-odd"><td><p><strong>Fcos_efficientnetb0</strong></p></td>
<td><p>1x512x512x3</p></td>
<td><p>5.02</p></td>
<td><p>1637.86</p></td>
<td><p>1.503</p></td>
<td><p>0.278</p></td>
<td><p>4.64</p></td>
<td><p>2.11</p></td>
<td><p>COCO</p></td>
<td><p>[IoU=0.50:0.95]=
0.356(FLOAT)/0.354(INT8)</p></td>
<td><p><a class="reference external" href="https://github.com/HorizonRobotics-Platform/ModelZoo/tree/master/Fcos_Efficientnetb0">https://github.com/HorizonRobotics-Platform/ModelZoo/tree/master/Fcos_Efficientnetb0</a></p></td>
</tr>
<tr class="row-even"><td><p><strong>Yolov3_vargdarknet</strong></p></td>
<td><p>1x416x416x3</p></td>
<td><p>42.82</p></td>
<td><p>289.614</p></td>
<td><p>6.856</p></td>
<td><p>9.894</p></td>
<td><p>45.41</p></td>
<td><p>8.28</p></td>
<td><p>COCO</p></td>
<td><p>[IoU=0.50:0.95]=
0.335(FLOAT)/0.316(INT8)</p></td>
<td><p><a class="reference external" href="https://github.com/HorizonRobotics-Platform/ModelZoo/tree/master/Yolov3_VargDarknet">https://github.com/HorizonRobotics-Platform/ModelZoo/tree/master/Yolov3_VargDarknet</a></p></td>
</tr>
<tr class="row-odd"><td><p><strong>Deeplabv3plus_efficientnetb0</strong></p></td>
<td><p>1x1024x2048x3</p></td>
<td><p>30.78</p></td>
<td><p>196.36</p></td>
<td><p>10.216</p></td>
<td><p>0.810</p></td>
<td><p>14.32</p></td>
<td><p>9.90</p></td>
<td><p>Cityscapes</p></td>
<td><p>[IoU=0.50:0.95]=
0.7507(FLOAT)/0.7567(INT8)</p></td>
<td><p><a class="reference external" href="https://github.com/HorizonRobotics-Platform/ModelZoo/tree/master/DeeplabV3Plus">https://github.com/HorizonRobotics-Platform/ModelZoo/tree/master/DeeplabV3Plus</a></p></td>
</tr>
<tr class="row-even"><td><p><strong>Fastscnn_efficientnetb0</strong></p></td>
<td><p>1x1024x2048x3</p></td>
<td><p>12.50</p></td>
<td><p>331.221</p></td>
<td><p>6.325</p></td>
<td><p>0.825</p></td>
<td><p>9.25</p></td>
<td><p>6.46</p></td>
<td><p>Cityscapes</p></td>
<td><p>[IoU=0.50:0.95]=
0.6997(FLOAT)/0.6928(INT8)</p></td>
<td><p><a class="reference external" href="https://github.com/HorizonRobotics-Platform/ModelZoo/tree/master/FastSCNN">https://github.com/HorizonRobotics-Platform/ModelZoo/tree/master/FastSCNN</a></p></td>
</tr>
<tr class="row-odd"><td><p><strong>Deeplabv3plus_efficientnetm1</strong></p></td>
<td><p>1x1024x2048x3</p></td>
<td><p>77.05</p></td>
<td><p>130.234</p></td>
<td><p>15.461</p></td>
<td><p>0.867</p></td>
<td><p>31.10</p></td>
<td><p>22.63</p></td>
<td><p>Cityscapes</p></td>
<td><p>[IoU=0.50:0.95]=
0.7794(FLOAT)/0.7741(INT8)</p></td>
<td><p><a class="reference external" href="https://github.com/HorizonRobotics-Platform/ModelZoo/tree/master/DeeplabV3Plus">https://github.com/HorizonRobotics-Platform/ModelZoo/tree/master/DeeplabV3Plus</a></p></td>
</tr>
<tr class="row-even"><td><p><strong>Deeplabv3plus_efficientnetm2</strong></p></td>
<td><p>1x1024x2048x3</p></td>
<td><p>124.16</p></td>
<td><p>85.12</p></td>
<td><p>22.539</p></td>
<td><p>0.814</p></td>
<td><p>79.01</p></td>
<td><p>59.33</p></td>
<td><p>Cityscapes</p></td>
<td><p>[IoU=0.50:0.95]=
0.7882(FLOAT)/0.7856(INT8)</p></td>
<td><p><a class="reference external" href="https://github.com/HorizonRobotics-Platform/ModelZoo/tree/master/DeeplabV3Plus">https://github.com/HorizonRobotics-Platform/ModelZoo/tree/master/DeeplabV3Plus</a></p></td>
</tr>
<tr class="row-odd"><td><p><strong>fcos_efficientnetb0</strong></p></td>
<td><p>1x512x512x3</p></td>
<td><p>5.03</p></td>
<td><p>TBD</p></td>
<td><p>TBD</p></td>
<td><p>TBD</p></td>
<td><p>5.17</p></td>
<td><p>2.44</p></td>
<td><p>COCO</p></td>
<td><p>[IoU=0.50:0.95]=
0.357(FLOAT)/0.357(INT8)</p></td>
<td><p><a class="reference external" href="http://cocodataset.org/">http://cocodataset.org/</a></p></td>
</tr>
<tr class="row-even"><td><p><strong>fcos_efficientnetb2</strong></p></td>
<td><p>1x768x768x3</p></td>
<td><p>22.11</p></td>
<td><p>TBD</p></td>
<td><p>TBD</p></td>
<td><p>TBD</p></td>
<td><p>18.87</p></td>
<td><p>12.81</p></td>
<td><p>COCO</p></td>
<td><p>[IoU=0.50:0.95]=
0.451(FLOAT)/0.450(INT8)</p></td>
<td><p><a class="reference external" href="http://cocodataset.org/">http://cocodataset.org/</a></p></td>
</tr>
<tr class="row-odd"><td><p><strong>fcos_efficientnetb3</strong></p></td>
<td><p>1x896x896x3</p></td>
<td><p>41.51</p></td>
<td><p>TBD</p></td>
<td><p>TBD</p></td>
<td><p>TBD</p></td>
<td><p>33.46</p></td>
<td><p>23.48</p></td>
<td><p>COCO</p></td>
<td><p>[IoU=0.50:0.95]=
0.476(FLOAT)/0.477(INT8)</p></td>
<td><p><a class="reference external" href="http://cocodataset.org/">http://cocodataset.org/</a></p></td>
</tr>
</tbody>
</table>
</section>
<section id="norm-type">
<h2><span class="section-number">6.2. </span>norm_type é…ç½®è¯´æ˜<a class="headerlink" href="#norm-type" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">ïƒ</a></h2>
<section id="id2">
<h3><span class="section-number">6.2.1. </span>å‚æ•°è¯´æ˜è§£æ<a class="headerlink" href="#id2" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">ïƒ</a></h3>
<p><strong>norm_type å‚æ•°è®²è§£</strong></p>
<ul class="simple">
<li><p>å‚æ•°ä½œç”¨ï¼šæ­¤å‚æ•°ä¸ºåœ¨æ¨¡å‹ä¸­æ·»åŠ çš„è¾“å…¥æ•°æ®é¢„å¤„ç†æ–¹æ³•ã€‚</p></li>
<li><p>å‚æ•°å–å€¼èŒƒå›´åŠè¯´æ˜ï¼š</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">no_preprocess</span></code> è¡¨ç¤ºä¸æ·»åŠ ä»»ä½•æ•°æ®é¢„å¤„ç†ã€‚</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">data_mean</span></code> è¡¨ç¤ºæä¾›å‡å‡å€¼é¢„å¤„ç†ã€‚</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">data_scale</span></code> è¡¨ç¤ºæä¾›ä¹˜scaleç³»æ•°é¢„å¤„ç†ã€‚</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">data_mean_and_scale</span></code> è¡¨ç¤ºæä¾›å…ˆå‡å‡å€¼å†ä¹˜scaleç³»æ•°å‰å¤„ç†ã€‚</p></li>
</ul>
</li>
</ul>
<div class="admonition attention">
<p class="admonition-title">æ³¨æ„</p>
<p>å½“è¾“å…¥èŠ‚ç‚¹å¤šäºä¸€ä¸ªæ—¶ï¼Œè®¾ç½®çš„èŠ‚ç‚¹é¡ºåºéœ€è¦ä¸ <code class="docutils literal notranslate"><span class="pre">input_name</span></code> ä¸­çš„é¡ºåºä¸¥æ ¼ä¿æŒä¸€è‡´ã€‚</p>
</div>
<p><strong>mean_value å‚æ•°è®²è§£</strong></p>
<ul class="simple">
<li><p>å‚æ•°ä½œç”¨ï¼šæ­¤å‚æ•°è¡¨ç¤ºæŒ‡å®šé¢„å¤„ç†æ–¹æ³•çš„å›¾åƒå‡å»çš„å‡å€¼ã€‚</p></li>
<li><p>ä½¿ç”¨è¯´æ˜ï¼šå½“ <code class="docutils literal notranslate"><span class="pre">norm_type</span></code> å–å€¼ä¸º <code class="docutils literal notranslate"><span class="pre">data_mean_and_scale</span></code> æˆ– <code class="docutils literal notranslate"><span class="pre">data_mean</span></code> æ—¶éœ€è¦é…ç½®è¯¥å‚æ•°ã€‚</p></li>
<li><p>å‚æ•°è¯´æ˜ï¼š</p>
<ul>
<li><p>å½“åªæœ‰ä¸€ä¸ªè¾“å…¥èŠ‚ç‚¹æ—¶ï¼Œä»…éœ€è¦é…ç½®ä¸€ä¸ªæ•°å€¼ï¼Œè¡¨ç¤ºæ‰€æœ‰é€šé“éƒ½å‡å»è¿™ä¸ªå‡å€¼ã€‚</p></li>
<li><p>å½“æœ‰å¤šä¸ªèŠ‚ç‚¹æ—¶ï¼Œæä¾›ä¸é€šé“æ•°é‡ä¸€è‡´çš„æ•°å€¼ï¼ˆè¿™äº›æ•°å€¼ä»¥ç©ºæ ¼åˆ†éš”å¼€ï¼‰ï¼Œè¡¨ç¤ºæ¯ä¸ªé€šé“éƒ½ä¼šå‡å»ä¸åŒçš„å‡å€¼ã€‚</p></li>
</ul>
</li>
</ul>
<div class="admonition attention">
<p class="admonition-title">æ³¨æ„</p>
<ol class="arabic simple">
<li><p>é…ç½®çš„è¾“å…¥èŠ‚ç‚¹æ•°é‡å¿…é¡»ä¸ <code class="docutils literal notranslate"><span class="pre">norm_type</span></code> é…ç½®çš„èŠ‚ç‚¹æ•°é‡ä¸€è‡´ã€‚</p></li>
<li><p>å¦‚æœå­˜åœ¨æŸä¸ªèŠ‚ç‚¹ä¸éœ€è¦ <code class="docutils literal notranslate"><span class="pre">mean</span></code> å¤„ç†ï¼Œåˆ™ä¸ºè¯¥èŠ‚ç‚¹é…ç½® <code class="docutils literal notranslate"><span class="pre">'None'</span></code>ã€‚</p></li>
</ol>
</div>
<p><strong>scale_value å‚æ•°è®²è§£</strong></p>
<ul class="simple">
<li><p>å‚æ•°ä½œç”¨ï¼šæ­¤å‚æ•°è¡¨ç¤ºæŒ‡å®šé¢„å¤„ç†æ–¹æ³•çš„æ•°å€¼scaleç³»æ•°ã€‚</p></li>
<li><p>ä½¿ç”¨è¯´æ˜ï¼šå½“ <code class="docutils literal notranslate"><span class="pre">norm_type</span></code> å–å€¼ä¸º <code class="docutils literal notranslate"><span class="pre">data_mean_and_scale</span></code> æˆ– <code class="docutils literal notranslate"><span class="pre">data_scale</span></code> æ—¶éœ€è¦é…ç½®è¯¥å‚æ•°ã€‚</p></li>
<li><p>å‚æ•°è¯´æ˜ï¼š</p>
<ul>
<li><p>å½“åªæœ‰ä¸€ä¸ªè¾“å…¥èŠ‚ç‚¹æ—¶ï¼Œä»…éœ€è¦é…ç½®ä¸€ä¸ªæ•°å€¼ï¼Œè¡¨ç¤ºæ‰€æœ‰é€šé“éƒ½ä¹˜ä»¥è¿™ä¸ªç³»æ•°ã€‚</p></li>
<li><p>å½“æœ‰å¤šä¸ªèŠ‚ç‚¹æ—¶ï¼Œæä¾›ä¸é€šé“æ•°é‡ä¸€è‡´çš„æ•°å€¼ï¼ˆè¿™äº›æ•°å€¼ä»¥ç©ºæ ¼åˆ†éš”å¼€ï¼‰ï¼Œè¡¨ç¤ºæ¯ä¸ªé€šé“éƒ½ä¼šä¹˜ä»¥ä¸åŒçš„ç³»æ•°ã€‚</p></li>
</ul>
</li>
</ul>
<div class="admonition attention">
<p class="admonition-title">æ³¨æ„</p>
<ol class="arabic simple">
<li><p>é…ç½®çš„è¾“å…¥èŠ‚ç‚¹æ•°é‡å¿…é¡»ä¸ <code class="docutils literal notranslate"><span class="pre">norm_type</span></code> é…ç½®çš„èŠ‚ç‚¹æ•°é‡ä¸€è‡´ã€‚</p></li>
<li><p>å¦‚æœå­˜åœ¨æŸä¸ªèŠ‚ç‚¹ä¸éœ€è¦ <code class="docutils literal notranslate"><span class="pre">scale</span></code> å¤„ç†ï¼Œåˆ™ä¸ºè¯¥èŠ‚ç‚¹é…ç½® <code class="docutils literal notranslate"><span class="pre">'None'</span></code>ã€‚</p></li>
</ol>
</div>
</section>
<section id="id3">
<h3><span class="section-number">6.2.2. </span>è®¡ç®—å…¬å¼åŠç¤ºä¾‹è¯´æ˜<a class="headerlink" href="#id3" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">ïƒ</a></h3>
<section id="id4">
<h4><span class="section-number">6.2.2.1. </span>æ¨¡å‹è®­ç»ƒæ—¶çš„æ•°æ®æ ‡å‡†åŒ–å¤„ç†è®¡ç®—å…¬å¼<a class="headerlink" href="#id4" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">ïƒ</a></h4>
<p>yamlæ–‡ä»¶ä¸­çš„meanå’Œscaleå‚æ•°ä¸è®­ç»ƒæ—¶çš„meanã€stdéœ€è¦è¿›è¡Œæ¢ç®—ã€‚</p>
<p>é¢„å¤„ç†èŠ‚ç‚¹ä¸­æ•°æ®æ ‡å‡†åŒ–æ“ä½œçš„è®¡ç®—æ–¹å¼ï¼ˆå³HzPreprocessèŠ‚ç‚¹ä¸­çš„è®¡ç®—å…¬å¼ï¼‰ä¸ºï¼š<span class="math notranslate nohighlight">\(norm\_data = ( data âˆ’ mean ) * scale\)</span> ã€‚</p>
<p>ä»¥yolov3ä¸ºä¾‹ï¼Œå…¶è®­ç»ƒæ—¶çš„é¢„å¤„ç†ä»£ç ä¸ºï¼š</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">base_transform</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="n">size</span><span class="p">,</span> <span class="n">mean</span><span class="p">,</span> <span class="n">std</span><span class="p">):</span>
    <span class="n">x</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">resize</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="p">(</span><span class="n">size</span><span class="p">,</span> <span class="n">size</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">))</span>
    <span class="n">x</span> <span class="o">/=</span> <span class="mi">255</span>
    <span class="n">x</span> <span class="o">-=</span> <span class="n">mean</span>
    <span class="n">x</span> <span class="o">/=</span> <span class="n">std</span>
    <span class="k">return</span> <span class="n">x</span>

<span class="k">class</span> <span class="nc">BaseTransform</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">size</span><span class="p">,</span> <span class="n">mean</span><span class="o">=</span><span class="p">(</span><span class="mf">0.406</span><span class="p">,</span> <span class="mf">0.456</span><span class="p">,</span> <span class="mf">0.485</span><span class="p">),</span> <span class="n">std</span><span class="o">=</span><span class="p">(</span><span class="mf">0.225</span><span class="p">,</span> <span class="mf">0.224</span><span class="p">,</span> <span class="mf">0.229</span><span class="p">)):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">size</span> <span class="o">=</span> <span class="n">size</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mean</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">mean</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">std</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">std</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span>
</pre></div>
</div>
<p>åˆ™è®¡ç®—å…¬å¼ä¸ºï¼š<span class="math notranslate nohighlight">\(norm\_data= (\frac{data}{255}  âˆ’ğ‘šğ‘’ğ‘ğ‘›) * \frac{1}{ğ‘ ğ‘¡ğ‘‘}\)</span>ï¼Œ</p>
<p>æ”¹å†™ä¸ºHzPreprocessèŠ‚ç‚¹çš„è®¡ç®—æ–¹å¼ï¼š<span class="math notranslate nohighlight">\(norm\_data= (\frac{data}{255}  âˆ’ğ‘šğ‘’ğ‘ğ‘›) * \frac{1}{ğ‘ ğ‘¡ğ‘‘} =(dataâˆ’255ğ‘šğ‘’ğ‘ğ‘›) * \frac{1}{255ğ‘ ğ‘¡ğ‘‘}\)</span> ï¼Œ</p>
<p>åˆ™ï¼š<span class="math notranslate nohighlight">\(mean\_yaml = 255 meanã€ğ‘ ğ‘ğ‘ğ‘™ğ‘’\_ğ‘¦ğ‘ğ‘šğ‘™=  \frac{1}{255 ğ‘ ğ‘¡ğ‘‘}\)</span> ã€‚</p>
</section>
<section id="id5">
<h4><span class="section-number">6.2.2.2. </span>æ¨¡å‹æ¨ç†æ—¶çš„è®¡ç®—å…¬å¼<a class="headerlink" href="#id5" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">ïƒ</a></h4>
<p>é€šè¿‡å¯¹yamlé…ç½®æ–‡ä»¶ä¸­çš„é…ç½®å‚æ•°ï¼Œå†³å®šæ˜¯å¦åŠ å…¥HzPreprocessèŠ‚ç‚¹ã€‚
å½“é…ç½®mean/scaleæ—¶ï¼Œåšæ¨¡å‹è½¬æ¢æ—¶ï¼Œä¼šåœ¨è¾“å…¥ç«¯æ–°å¢ä¸€ä¸ªHzPreprocessèŠ‚ç‚¹ï¼ŒHzPreprocessèŠ‚ç‚¹å¯ä»¥ç†è§£ä¸ºå¯¹è¾“å…¥æ•°æ®åšäº†ä¸€ä¸ªconvæ“ä½œã€‚</p>
<p>HzPreprocesså†…çš„è®¡ç®—å…¬å¼ä¸ºï¼š <span class="math notranslate nohighlight">\((inputï¼ˆå–å€¼èŒƒå›´[-128,127]ï¼‰+ 128) - meanï¼‰ * scale\)</span>ï¼Œå…¶ä¸­ <code class="docutils literal notranslate"><span class="pre">weight=scale</span></code>ï¼Œ <code class="docutils literal notranslate"><span class="pre">bias=(128-mean)</span> <span class="pre">*</span> <span class="pre">scale</span></code> ã€‚</p>
<div class="admonition attention">
<p class="admonition-title">æ³¨æ„</p>
<ol class="arabic simple">
<li><p>åœ¨yamlä¸­æ·»åŠ mean/scaleåï¼Œå°±ä¸éœ€è¦åœ¨å‰å¤„ç†å†…æ·»åŠ MeanTransformerå’ŒScaleTransformeräº†ã€‚</p></li>
<li><p>åœ¨yamlä¸­æ·»åŠ mean/scaleï¼Œä¼šå°†å‚æ•°æ”¾å…¥åˆ°HzPreprocessèŠ‚ç‚¹å†…ï¼ŒHzPreprocessèŠ‚ç‚¹ä¸ºBPU èŠ‚ç‚¹ã€‚</p></li>
</ol>
</div>
</section>
</section>
</section>
<section id="transformer">
<h2><span class="section-number">6.3. </span>transformerè¯´æ˜<a class="headerlink" href="#transformer" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">ïƒ</a></h2>
<p>æœ¬ç« èŠ‚å°†å¯¹å„ä¸ªtransformerçš„æ¦‚å¿µåŠå‚æ•°è¿›è¡Œè¯´æ˜ï¼Œå¹¶ä¸ºæ‚¨æä¾›å‚è€ƒä½¿ç”¨ç¤ºä¾‹ï¼Œæ–¹ä¾¿æ‚¨è¿›è¡Œtranformeræ“ä½œã€‚</p>
<p>åœ¨æ–‡æ¡£å†…å®¹å¼€å§‹é˜…è¯»å‰ï¼Œä»¥ä¸‹å†…å®¹è¯·æ‚¨æ³¨æ„ï¼š</p>
<div class="admonition attention">
<p class="admonition-title">æ³¨æ„</p>
<p>å›¾ç‰‡æ•°æ®ä¸ºä¸‰ç»´æ•°æ®ï¼Œä½†åœ°å¹³çº¿æä¾›çš„transformeréƒ½æ˜¯ä»¥å››ç»´æ•°æ®çš„æ–¹å¼æ¥è¿›è¡Œè·å–å’Œå¤„ç†çš„ï¼Œtransformeråªä¼šå¯¹è¾“å…¥æ•°æ®ä¸­çš„ç¬¬0å¼ å›¾ç‰‡åšè¯¥æ“ä½œã€‚</p>
</div>
<section id="addtransformer">
<h3><span class="section-number">6.3.1. </span>AddTransformer<a class="headerlink" href="#addtransformer" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">ïƒ</a></h3>
<p><strong>è¯´æ˜</strong>ï¼š</p>
<p>å¯¹è¾“å…¥å›¾ç‰‡ä¸­çš„æ‰€æœ‰åƒç´ å€¼åšå¢åŠ valueçš„æ“ä½œã€‚è¯¥transformerä¼šåœ¨è¾“å‡ºæ—¶, å°†æ•°æ®æ ¼å¼è½¬ä¸ºfloat32ã€‚</p>
<p><strong>å‚æ•°</strong>ï¼š</p>
<ul class="simple">
<li><p>value: å¯¹æ¯ä¸ªåƒç´ åšå¢åŠ çš„æ•°å€¼, æ³¨æ„valueçš„å–å€¼å¯ä»¥ä¸ºè´Ÿæ•°, å¦‚ -128ã€‚</p></li>
</ul>
<p><strong>ä½¿ç”¨ä¸¾ä¾‹</strong>ï¼š</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># å¯¹å›¾åƒæ•°æ®åšå‡å»128çš„æ“ä½œ</span>
<span class="sb">``</span>AddTransformer<span class="o">(</span>-128<span class="o">)</span><span class="sb">``</span>

<span class="c1"># å¯¹å›¾åƒæ•°æ®åšå¢åŠ 127çš„æ“ä½œ</span>
<span class="sb">``</span>AddTransformer<span class="o">(</span><span class="m">127</span><span class="o">)</span><span class="sb">``</span>
</pre></div>
</div>
</section>
<section id="meantransformer">
<h3><span class="section-number">6.3.2. </span>MeanTransformer<a class="headerlink" href="#meantransformer" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">ïƒ</a></h3>
<p><strong>è¯´æ˜</strong>ï¼š</p>
<p>å¯¹è¾“å…¥å›¾ç‰‡ä¸­çš„æ‰€æœ‰åƒç´ å€¼åšå‡å» mean_value çš„æ“ä½œã€‚</p>
<p><strong>å‚æ•°</strong>ï¼š</p>
<ul class="simple">
<li><p>means: å¯¹æ¯ä¸ªåƒç´ åšå¢åŠ çš„æ•°å€¼, æ³¨æ„valueçš„å–å€¼å¯ä»¥ä¸ºè´Ÿæ•°, å¦‚ -128ã€‚</p></li>
<li><p>data_format: è¾“å…¥çš„layoutç±»å‹ï¼Œå–å€¼èŒƒå›´ä¸º[â€œCHWâ€,â€HWCâ€], é»˜è®¤ â€œCHWâ€ã€‚</p></li>
</ul>
<p><strong>ä½¿ç”¨ä¸¾ä¾‹</strong>ï¼š</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># æ¯ä¸ªåƒç´ å‡å»128.0 è¾“å…¥çš„ç±»å‹ä¸ºCHW</span>
MeanTransformer<span class="o">(</span>np.array<span class="o">([</span><span class="m">128</span>.0, <span class="m">128</span>.0, <span class="m">128</span>.0<span class="o">]))</span>

<span class="c1"># æ¯ä¸ªåƒç´ å‡å»ä¸åŒçš„æ•°å€¼ï¼Œ103.94, 116.78, 123.68ï¼Œè¾“å…¥çš„ç±»å‹ä¸º HWC</span>
MeanTransformer<span class="o">(</span>np.array<span class="o">([</span><span class="m">103</span>.94, <span class="m">116</span>.78, <span class="m">123</span>.68<span class="o">])</span>, <span class="nv">data_format</span><span class="o">=</span><span class="s2">&quot;HWC&quot;</span><span class="o">)</span>
</pre></div>
</div>
</section>
<section id="scaletransformer">
<h3><span class="section-number">6.3.3. </span>ScaleTransformer<a class="headerlink" href="#scaletransformer" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">ïƒ</a></h3>
<p><strong>è¯´æ˜</strong>ï¼š</p>
<p>å¯¹è¾“å…¥å›¾ç‰‡ä¸­çš„æ‰€æœ‰åƒç´ å€¼åšä¹˜ä»¥data_scaleç³»æ•°çš„æ“ä½œã€‚</p>
<p><strong>å‚æ•°</strong>ï¼š</p>
<ul class="simple">
<li><p>scale_value: éœ€è¦ä¹˜ä»¥çš„ç³»æ•°ï¼Œå¦‚0.0078125 æˆ–è€…1/128ã€‚</p></li>
</ul>
<p><strong>ä½¿ç”¨ä¸¾ä¾‹</strong>ï¼š</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># å°†å–å€¼èŒƒå›´-128~127ï¼Œæ‰€æœ‰çš„åƒç´ çš„è°ƒæ•´åˆ°-1~1ä¹‹é—´</span>
ScaleTransformer<span class="o">(</span><span class="m">0</span>.0078125<span class="o">)</span>
<span class="c1"># æˆ–è€…</span>
ScaleTransformer<span class="o">(</span><span class="m">1</span>/128<span class="o">)</span>
</pre></div>
</div>
</section>
<section id="normalizetransformer">
<h3><span class="section-number">6.3.4. </span>NormalizeTransformer<a class="headerlink" href="#normalizetransformer" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">ïƒ</a></h3>
<p><strong>è¯´æ˜</strong>ï¼š</p>
<p>ç”¨äºå¯¹è¾“å…¥å›¾ç‰‡è¿›è¡Œå½’ä¸€åŒ–çš„æ“ä½œã€‚è¯¥transformerä¼šåœ¨è¾“å‡ºæ—¶, å°†æ•°æ®æ ¼å¼è½¬ä¸ºfloat32ã€‚</p>
<p><strong>å‚æ•°</strong>ï¼š</p>
<ul class="simple">
<li><p>stdï¼šè¾“å…¥çš„ç¬¬ä¸€å¼ å›¾ç‰‡ï¼Œéœ€è¦é™¤ä»¥çš„æ•°å€¼ã€‚</p></li>
</ul>
<p><strong>ä½¿ç”¨ä¸¾ä¾‹</strong>ï¼š</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># å°†å–å€¼èŒƒå›´[-128, 127] æ‰€æœ‰çš„åƒç´ çš„è°ƒæ•´åˆ°-1~1ä¹‹é—´</span>
NormalizeTransformer<span class="o">(</span><span class="m">128</span><span class="o">)</span>
</pre></div>
</div>
</section>
<section id="transposetransformer">
<h3><span class="section-number">6.3.5. </span>TransposeTransformer<a class="headerlink" href="#transposetransformer" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">ïƒ</a></h3>
<p><strong>è¯´æ˜</strong>ï¼š</p>
<p>ç”¨äºåšlayoutè½¬æ¢çš„æ“ä½œã€‚</p>
<p><strong>å‚æ•°</strong>ï¼š</p>
<ul class="simple">
<li><p>order: å¯¹è¾“å…¥å›¾ç‰‡åšlayoutè½¬æ¢åçš„é¡ºåºï¼ˆé¡ºåºä¸åŸæœ‰çš„layouté¡ºåºæœ‰å…³ï¼‰ã€‚å¦‚ï¼šHWCçš„é¡ºåºä¸º0,1,2ï¼Œéœ€è¦è½¬ä¸ºCHWæ—¶ï¼Œorderä¸º(2,0,1)ã€‚</p></li>
</ul>
<p><strong>ä½¿ç”¨ä¸¾ä¾‹</strong>ï¼š</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># HWCè½¬åˆ°CHW</span>
TransposeTransformer<span class="o">((</span><span class="m">2</span>, <span class="m">0</span>, <span class="m">1</span><span class="o">))</span>
<span class="c1"># CHWè½¬åˆ°HWC</span>
TransposeTransformer<span class="o">((</span><span class="m">1</span>, <span class="m">2</span>, <span class="m">0</span><span class="o">))</span>
</pre></div>
</div>
</section>
<section id="hwc2chwtransformer">
<h3><span class="section-number">6.3.6. </span>HWC2CHWTransformer<a class="headerlink" href="#hwc2chwtransformer" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">ïƒ</a></h3>
<p><strong>è¯´æ˜</strong>ï¼š</p>
<p>ç”¨äºå°†NHWCè½¬æ¢ä¸ºNCHWçš„æ“ä½œã€‚</p>
<p><strong>å‚æ•°</strong>ï¼šä¸æ¶‰åŠã€‚</p>
<p><strong>ä½¿ç”¨ä¸¾ä¾‹</strong>ï¼š</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># NHWCè½¬åˆ°NCHW</span>
HWC2CHWTransformer<span class="o">()</span>
</pre></div>
</div>
</section>
<section id="chw2hwctransformer">
<h3><span class="section-number">6.3.7. </span>CHW2HWCTransformer<a class="headerlink" href="#chw2hwctransformer" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">ïƒ</a></h3>
<p><strong>è¯´æ˜</strong>ï¼š</p>
<p>ç”¨äºå°†NCHWè½¬æ¢ä¸ºNHWCçš„æ“ä½œã€‚</p>
<p><strong>å‚æ•°</strong>ï¼šä¸æ¶‰åŠã€‚</p>
<p><strong>ä½¿ç”¨ä¸¾ä¾‹</strong>ï¼š</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># NCHWè½¬åˆ° NHWC</span>
CHW2HWCTransformer<span class="o">()</span>
</pre></div>
</div>
</section>
<section id="centercroptransformer">
<h3><span class="section-number">6.3.8. </span>CenterCropTransformer<a class="headerlink" href="#centercroptransformer" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">ïƒ</a></h3>
<p><strong>è¯´æ˜</strong>ï¼š</p>
<p>ä»¥ç›´æ¥æˆªæ–­å–å€¼çš„æ–¹å¼ä»å›¾ç‰‡ä¸­å¿ƒè£å‰ªå‡ºä¸€ä¸ªæ­£æ–¹å½¢çš„å›¾ç‰‡çš„æ“ä½œã€‚è¯¥transformerä¼šåœ¨è¾“å‡ºæ—¶, å°†æ•°æ®æ ¼å¼è½¬ä¸ºfloat32ã€‚å½“data_typeçš„å€¼ä¸ºuint8æ—¶ï¼Œè¾“å‡ºä¸ºuint8ã€‚</p>
<p><strong>å‚æ•°</strong>ï¼š</p>
<ul class="simple">
<li><p>crop_size: ä¸­å¿ƒè£å‰ªçš„æ­£æ–¹å½¢çš„è¾¹é•¿sizeã€‚</p></li>
<li><p>data_type: è¾“å‡ºç»“æœçš„ç±»å‹ï¼Œå–å€¼èŒƒå›´ä¸º[â€œfloatâ€, â€œuint8â€]ã€‚</p></li>
</ul>
<p><strong>ä½¿ç”¨ä¸¾ä¾‹</strong>ï¼š</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># ä»¥224*224çš„æ–¹å¼ï¼Œåšä¸­å¿ƒè£å‰ªï¼Œé»˜è®¤è¾“å‡ºç±»å‹ä¸ºfloat32</span>
CenterCropTransformer<span class="o">(</span><span class="nv">crop_size</span><span class="o">=</span><span class="m">224</span><span class="o">)</span>

<span class="c1"># ä»¥224*224çš„æ–¹å¼ï¼Œåšä¸­å¿ƒè£å‰ªï¼Œè¾“å‡ºç±»å‹ä¸ºuint8</span>
CenterCropTransformer<span class="o">(</span><span class="nv">crop_size</span><span class="o">=</span><span class="m">224</span>, <span class="nv">data_type</span><span class="o">=</span><span class="s2">&quot;uint8&quot;</span><span class="o">)</span>
</pre></div>
</div>
</section>
<section id="pilcentercroptransformer">
<h3><span class="section-number">6.3.9. </span>PILCenterCropTransformer<a class="headerlink" href="#pilcentercroptransformer" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">ïƒ</a></h3>
<p><strong>è¯´æ˜</strong>ï¼š</p>
<p>ä½¿ç”¨PILçš„æ–¹å¼ä»å›¾ç‰‡ä¸­å¿ƒè£å‰ªå‡ºä¸€ä¸ªæ­£æ–¹å½¢çš„å›¾ç‰‡çš„æ“ä½œã€‚è¯¥transformerä¼šåœ¨è¾“å‡ºæ—¶, å°†æ•°æ®æ ¼å¼è½¬ä¸ºfloat32ã€‚</p>
<p><strong>å‚æ•°</strong>ï¼š</p>
<ul class="simple">
<li><p>size: ä¸­å¿ƒè£å‰ªçš„æ­£æ–¹å½¢çš„è¾¹é•¿sizeã€‚</p></li>
</ul>
<p><strong>ä½¿ç”¨ä¸¾ä¾‹</strong>ï¼š</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># ä»¥224*224çš„æ–¹å¼ï¼Œä½¿ç”¨PILçš„æ–¹å¼åšä¸­å¿ƒè£å‰ª</span>
PILCenterCropTransformer<span class="o">(</span><span class="nv">size</span><span class="o">=</span><span class="m">224</span><span class="o">)</span>
</pre></div>
</div>
</section>
<section id="longsidecroptransformer">
<h3><span class="section-number">6.3.10. </span>LongSideCropTransformer<a class="headerlink" href="#longsidecroptransformer" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">ïƒ</a></h3>
<p><strong>è¯´æ˜</strong>ï¼š</p>
<p>ç”¨äºåšé•¿è¾¹è£å‰ªçš„æ“ä½œã€‚è¯¥ transformer ä¼šåœ¨è¾“å‡ºæ—¶, å°†æ•°æ®æ ¼å¼è½¬ä¸ºfloat32ã€‚</p>
<p>å½“å®½åº¦æ¯”é«˜åº¦çš„æ•°å€¼å¤§æ—¶ï¼Œä¼šè£å‰ªå‡ºä¸€ä¸ªä¸­å¿ƒä»¥é«˜åº¦å¤§å°ä¸ºå‡†çš„æ­£æ–¹å½¢ï¼Œå¦‚å®½100ï¼Œé«˜70ï¼Œè£å‰ªä¹‹åå¤§å°ä¸º70*70ã€‚</p>
<p>å½“é«˜åº¦æ¯”å®½åº¦çš„æ•°å€¼å¤§æ—¶ï¼Œä¼šè£å‰ªå‡ºä¸€ä¸ªä¸­å¿ƒä»¥å®½åº¦å¤§å°ä¸å˜ï¼Œé«˜åº¦ä¸ºå·®å€¼çš„ä¸€åŠ+å®½åº¦ çš„é•¿æ–¹å½¢ï¼Œå¦‚å®½70ï¼Œé«˜100ï¼Œè£å‰ªä¹‹åå¤§å°ä¸º <cite>70*ï¼ˆ100-70ï¼‰/2+70</cite> ï¼Œå³70* 85å¤§å°çš„é•¿æ–¹å½¢ã€‚</p>
<p><strong>å‚æ•°</strong>ï¼šä¸æ¶‰åŠã€‚</p>
<p><strong>ä½¿ç”¨ä¸¾ä¾‹</strong>ï¼š</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>LongSideCropTransformer<span class="o">()</span>
</pre></div>
</div>
</section>
<section id="padresizetransformer">
<h3><span class="section-number">6.3.11. </span>PadResizeTransformer<a class="headerlink" href="#padresizetransformer" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">ïƒ</a></h3>
<p><strong>è¯´æ˜</strong>ï¼š</p>
<p>ä½¿ç”¨å¡«å……çš„æ–¹å¼åšå›¾åƒæ”¾å¤§çš„æ“ä½œã€‚è¯¥ transformer ä¼šåœ¨è¾“å‡ºæ—¶, å°†æ•°æ®æ ¼å¼è½¬ä¸ºfloat32ã€‚</p>
<p><strong>å‚æ•°</strong>ï¼š</p>
<ul class="simple">
<li><p>target_sizeï¼šç›®æ ‡å¤§å°ï¼Œå€¼ä¸ºå…ƒç»„ï¼Œå¦‚(240,240)ã€‚</p></li>
<li><p>pad_valueï¼šå¡«å……åˆ°æ•°ç»„ä¸­çš„å€¼ï¼Œé»˜è®¤å€¼ä¸º127ã€‚</p></li>
<li><p>pad_positionï¼šå¡«å……çš„ä½ç½®ï¼Œå–å€¼èŒƒå›´ä¸º[â€œboundaryâ€ï¼Œ â€œbottom_rightâ€]ï¼Œé»˜è®¤å€¼ä¸º â€œboundaryâ€ã€‚</p></li>
</ul>
<p><strong>ä½¿ç”¨ä¸¾ä¾‹</strong>ï¼š</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># è£å‰ªä¸€ä¸ªå¤§å°ä¸º512*512ï¼Œå¡«å……åˆ°å³ä¸‹è§’ï¼Œå¡«å……å€¼ä¸º0</span>
PadResizeTransformer<span class="o">((</span><span class="m">512</span>, <span class="m">512</span><span class="o">)</span>, <span class="nv">pad_position</span><span class="o">=</span><span class="s1">&#39;bottom_right&#39;</span>, <span class="nv">pad_value</span><span class="o">=</span><span class="m">0</span><span class="o">)</span>

<span class="c1"># è£å‰ªä¸€ä¸ªå¤§å°ä¸º608*608ï¼Œå¡«å……åˆ°è¾¹æ¡†ï¼Œå¡«å……å€¼ä¸º 127</span>
PadResizeTransformer<span class="o">(</span><span class="nv">target_size</span><span class="o">=(</span><span class="m">608</span>, <span class="m">608</span><span class="o">))</span>
</pre></div>
</div>
</section>
<section id="resizetransformer">
<h3><span class="section-number">6.3.12. </span>ResizeTransformer<a class="headerlink" href="#resizetransformer" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">ïƒ</a></h3>
<p><strong>è¯´æ˜</strong>ï¼š</p>
<p>ç”¨äºè°ƒæ•´å›¾åƒå¤§å°çš„æ“ä½œã€‚</p>
<p><strong>å‚æ•°</strong>ï¼š</p>
<ul>
<li><p>target_sizeï¼šç›®æ ‡å¤§å°ï¼Œå€¼ä¸ºå…ƒç»„ï¼Œå¦‚(240,240)ã€‚</p></li>
<li><p>modeï¼šå›¾ç‰‡å¤„ç†æ¨¡å¼ï¼Œå–å€¼èŒƒå›´ä¸º(â€œskimageâ€ï¼Œâ€opencvâ€)ï¼Œé»˜è®¤å€¼ä¸º â€œskimageâ€ã€‚</p></li>
<li><p>methodï¼šæ’å€¼çš„æ–¹æ³•ï¼Œæ­¤å‚æ•°ä»…åœ¨modeä¸ºskimageæ—¶ç”Ÿæ•ˆã€‚å–å€¼èŒƒå›´ä¸º0-5ï¼Œé»˜è®¤å€¼ä¸º1ï¼Œå…¶ä¸­ï¼š</p>
<ul class="simple">
<li><p>0ä»£è¡¨Nearest-neighborï¼›</p></li>
<li><p>1ä»£è¡¨Bi-linear(default)ï¼›</p></li>
<li><p>2ä»£è¡¨Bi-quadratic;</p></li>
<li><p>3ä»£è¡¨Bi-cubic;</p></li>
<li><p>4ä»£è¡¨Bi-quartic;</p></li>
<li><p>5ä»£è¡¨Bi-quinticã€‚</p></li>
</ul>
</li>
<li><p>data_typeï¼šè¾“å‡ºçš„ç±»å‹ï¼Œå–å€¼èŒƒå›´ä¸º(uint8ï¼Œfloat)ï¼Œé»˜è®¤ä¸ºfloatç±»å‹ã€‚å½“è¢«è®¾ç½®ä¸ºuint8æ—¶ï¼Œè¾“å‡ºç±»å‹ä¸ºuint8 ï¼Œå…¶ä»–æƒ…å†µä¸ºfloat32ã€‚</p></li>
<li><p>interpolationï¼šæ’å€¼çš„æ–¹æ³•ï¼Œæ­¤å‚æ•°ä»…åœ¨modeä¸ºopencvæ—¶ç”Ÿæ•ˆã€‚é»˜è®¤ä¸ºç©ºï¼Œå–å€¼èŒƒå›´ä¸º(opencvçš„æ’å€¼æ–¹å¼)ï¼Œ
ç›®å‰interpolationä»…æ”¯æŒä¸ºç©ºæˆ–opencvä¸­çš„INTER_CUBICä¸¤ç§æ’å€¼æ–¹æ³•ï¼Œå½“interpolationä¸ºç©ºæ—¶ï¼Œé»˜è®¤ä½¿ç”¨INTER_LINEARæ–¹å¼ã€‚</p>
<p>ä»¥ä¸‹ä¸ºopencvä¸­æ”¯æŒçš„æ’å€¼æ–¹å¼åŠè¯´æ˜ï¼ˆç›®å‰æœªæ”¯æŒçš„æ’å€¼æ–¹å¼å°†åœ¨åç»­è¿­ä»£ä¸­é€æ­¥æ”¯æŒï¼‰ï¼š</p>
<ul class="simple">
<li><p>INTER_NEARESTï¼Œæœ€è¿‘é‚»æ’å€¼ï¼›</p></li>
<li><p>INTER_LINEARï¼ŒåŒçº¿æ€§æ’å€¼ï¼Œå½“interpolationä¸ºç©ºæ—¶ï¼Œé»˜è®¤ä½¿ç”¨è¿™ç§æ–¹æ³•ã€‚</p></li>
<li><p>INTER_CUBICï¼ŒåŒä¸‰æ¬¡æ’å€¼4x4åƒç´ é‚»åŸŸå†…çš„åŒç«‹æ–¹æ’å€¼ã€‚</p></li>
<li><p>INTER_AREAï¼Œä½¿ç”¨åƒç´ é¢ç§¯å…³ç³»é‡é‡‡æ ·ã€‚å®ƒå¯èƒ½æ˜¯å›¾åƒæŠ½å–çš„é¦–é€‰æ–¹æ³•ï¼Œå› ä¸ºå®ƒå¯ä»¥æä¾›æ— è«å°”æ¡çº¹çš„ç»“æœã€‚ä½†æ˜¯å½“å›¾åƒè¢«ç¼©æ”¾æ—¶ï¼Œå®ƒç±»ä¼¼äºINTER_NEARESTæ–¹æ³•ã€‚</p></li>
<li><p>INTER_LANCZOS4ï¼Œ8x8é‚»åŸŸçš„Lanczosæ’å€¼ã€‚</p></li>
<li><p>INTER_LINEAR_EXACTï¼Œä½ç²¾ç¡®åŒçº¿æ€§æ’å€¼ã€‚</p></li>
<li><p>INTER_NEAREST_EXACTï¼Œä½ç²¾ç¡®æœ€è¿‘é‚»æ’å€¼ã€‚è¿™å°†äº§ç”Ÿä¸PILã€scikit-imageæˆ–Matlabä¸­çš„æœ€è¿‘é‚»æ–¹æ³•ç›¸åŒçš„ç»“æœã€‚</p></li>
<li><p>INTER_MAXï¼Œæ’å€¼ä»£ç çš„æ©ç ã€‚</p></li>
<li><p>WARP_FILL_OUTLIERSï¼Œæ ‡å¿—ï¼Œå¡«å……æ‰€æœ‰ç›®æ ‡å›¾åƒåƒç´ ã€‚å¦‚æœå…¶ä¸­ä¸€äº›å¯¹åº”äºæºå›¾åƒä¸­çš„å¼‚å¸¸å€¼ï¼Œåˆ™å°†å®ƒä»¬è®¾ç½®ä¸ºé›¶ã€‚</p></li>
<li><p>WARP_INVERSE_MAPï¼Œæ ‡å¿—ï¼Œé€†å˜æ¢ã€‚</p></li>
</ul>
</li>
</ul>
<p><strong>ä½¿ç”¨ä¸¾ä¾‹</strong>ï¼š</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># å°†è¾“å…¥å›¾ç‰‡å¤§å°è°ƒæ•´ä¸º224*224ï¼Œé‡‡ç”¨ opencv çš„æ–¹å¼å¤„ç†å›¾ç‰‡ï¼Œæ’å€¼çš„æ–¹å¼ä¸ºåŒçº¿æ€§ï¼Œè¾“å‡ºä¸ºfloat32</span>
ResizeTransformer<span class="o">(</span><span class="nv">target_size</span><span class="o">=(</span><span class="m">224</span>, <span class="m">224</span><span class="o">)</span>, <span class="nv">mode</span><span class="o">=</span><span class="s1">&#39;opencv&#39;</span>, <span class="nv">method</span><span class="o">=</span><span class="m">1</span><span class="o">)</span>

<span class="c1"># å°†è¾“å…¥å›¾ç‰‡å¤§å°è°ƒæ•´ä¸º256*256ï¼Œé‡‡ç”¨skimageçš„æ–¹å¼å¤„ç†å›¾ç‰‡ï¼Œæ’å€¼çš„æ–¹å¼ä¸ºåŒçº¿æ€§ï¼Œè¾“å‡ºä¸ºfloat32</span>
ResizeTransformer<span class="o">(</span><span class="nv">target_size</span><span class="o">=(</span><span class="m">256</span>, <span class="m">256</span><span class="o">))</span>

<span class="c1"># å°†è¾“å…¥å›¾ç‰‡å¤§å°è°ƒæ•´ä¸º256*256ï¼Œé‡‡ç”¨skimageçš„æ–¹å¼å¤„ç†å›¾ç‰‡ï¼Œæ’å€¼çš„æ–¹å¼ä¸ºåŒçº¿æ€§ï¼Œè¾“å‡ºä¸ºuint8</span>
ResizeTransformer<span class="o">(</span><span class="nv">target_size</span><span class="o">=(</span><span class="m">256</span>, <span class="m">256</span><span class="o">)</span>, <span class="nv">data_type</span><span class="o">=</span><span class="s2">&quot;uint8&quot;</span><span class="o">)</span>
</pre></div>
</div>
</section>
<section id="pilresizetransformer">
<h3><span class="section-number">6.3.13. </span>PILResizeTransformer<a class="headerlink" href="#pilresizetransformer" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">ïƒ</a></h3>
<p><strong>è¯´æ˜</strong>ï¼š</p>
<p>ä½¿ç”¨PILåº“åšè°ƒæ•´å›¾åƒå¤§å°çš„æ“ä½œã€‚</p>
<p><strong>å‚æ•°</strong>ï¼š</p>
<ul class="simple">
<li><p>sizeï¼šç›®æ ‡å¤§å°ï¼Œå€¼ä¸ºå…ƒç»„ï¼Œå¦‚(240,240)ã€‚</p></li>
<li><p>interpolationï¼šæŒ‡å®šæ’å€¼çš„æ–¹å¼ï¼Œå–å€¼èŒƒå›´ï¼š(Image.NEARESTï¼ŒImage.BILINEARï¼ŒImage.BICUBICï¼ŒImage.LANCZOS)ï¼Œ é»˜è®¤å€¼ä¸ºImage.BILINEARã€‚</p>
<ul>
<li><p>Image.NEARESTï¼šæœ€è¿‘é‚»é‡‡æ ·ï¼›</p></li>
<li><p>Image.BILINEARï¼šçº¿æ€§æ’å€¼ï¼›</p></li>
<li><p>Image.BICUBICï¼šä¸‰æ¬¡æ ·æ¡æ’å€¼ï¼›</p></li>
<li><p>Image.LANCZOSï¼šé«˜è´¨é‡ä¸‹é‡‡æ ·æ»¤æ³¢å™¨ã€‚</p></li>
</ul>
</li>
</ul>
<p><strong>ä½¿ç”¨ä¸¾ä¾‹</strong>ï¼š</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># å°†è¾“å…¥å›¾ç‰‡å¤§å°è°ƒæ•´ä¸º256*256 æ’å€¼çš„æ–¹å¼ä¸ºçº¿æ€§æ’å€¼</span>
PILResizeTransformer<span class="o">(</span><span class="nv">size</span><span class="o">=</span><span class="m">256</span><span class="o">)</span>

<span class="c1"># å°†è¾“å…¥å›¾ç‰‡å¤§å°è°ƒæ•´ä¸º256*256 æ’å€¼çš„æ–¹å¼ä¸ºé«˜è´¨é‡ä¸‹é‡‡æ ·æ»¤æ³¢å™¨</span>
PILResizeTransformer<span class="o">(</span><span class="nv">size</span><span class="o">=</span><span class="m">256</span>, <span class="nv">interpolation</span><span class="o">=</span>Image.LANCZOS<span class="o">)</span>
</pre></div>
</div>
</section>
<section id="shortlongresizetransformer">
<h3><span class="section-number">6.3.14. </span>ShortLongResizeTransformer<a class="headerlink" href="#shortlongresizetransformer" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">ïƒ</a></h3>
<p><strong>è¯´æ˜</strong>ï¼š</p>
<p>æŒ‰ç…§åŸæ¯”ä¾‹å¯¹è¾“å…¥å›¾ç‰‡è¿›è¡Œç¼©æ”¾çš„æ“ä½œï¼Œæ–°å›¾ç‰‡çš„å¤§å°ä¸è®¾ç½®çš„å‚æ•°æœ‰å…³ã€‚æ“ä½œæ–¹å¼å¦‚ä¸‹ï¼š</p>
<ol class="arabic simple">
<li><p>å…ˆä»¥short_sizeçš„å¤§å°é™¤ä»¥åŸå›¾ç‰‡çš„å®½å’Œé«˜é‡Œæœ€å°å€¼ï¼Œä»¥è¿™ä¸ªå€¼ä¸ºç¼©æ”¾æ¯”ä¾‹ç³»æ•°ã€‚</p></li>
<li><p>å½“ç¼©æ”¾æ¯”ä¾‹ç³»æ•°ä¹˜ä»¥åŸå›¾ç‰‡çš„å®½å’Œé«˜ä¸­çš„æœ€å¤§å€¼ï¼Œå¾—åˆ°çš„ç»“æœå¤§äºlong_sizeçš„æ•°å€¼æ—¶ï¼Œç¼©æ”¾æ¯”ä¾‹ç³»æ•°å°†å˜æ›´ä¸ºlong_sizeé™¤ä»¥åŸå›¾ç‰‡çš„å®½å’Œé«˜ä¸­çš„æœ€å¤§å€¼ã€‚</p></li>
<li><p>ä½¿ç”¨opencvä¸­çš„resizeæ–¹æ³•ï¼Œæ ¹æ®ä¸Šæ–¹å¾—åˆ°çš„ç¼©æ”¾æ¯”ä¾‹ç³»æ•°é‡æ–°è£å‰ªå›¾ç‰‡ã€‚</p></li>
</ol>
<p><strong>å‚æ•°</strong>ï¼š</p>
<ul class="simple">
<li><p>short_sizeï¼šé¢„æœŸè£å‰ªåçš„çŸ­è¾¹çš„é•¿åº¦ã€‚</p></li>
<li><p>long_sizeï¼šé¢„æœŸè£å‰ªåçš„é•¿è¾¹çš„é•¿åº¦ã€‚</p></li>
<li><p>include_imï¼šé»˜è®¤å€¼ä¸ºTrueï¼Œè®¾ç½®ä¸ºTrueæ—¶, ä¼šåœ¨è¿”å›æ—¶é™¤äº†è¿”å›å¤„ç†åçš„å›¾ç‰‡, è¿˜ä¼šè¿”å›åŸå›¾ç‰‡ã€‚</p></li>
</ul>
<p><strong>ä½¿ç”¨ä¸¾ä¾‹</strong>ï¼š</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># çŸ­è¾¹é•¿åº¦ä¸º20ï¼Œé•¿è¾¹é•¿åº¦ä¸º100ï¼Œè¿”å›å¤„ç†åçš„å›¾ç‰‡åŠåŸå›¾ç‰‡</span>
ShortLongResizeTransformer<span class="o">(</span><span class="nv">short_size</span><span class="o">=</span><span class="m">20</span>, <span class="nv">long_size</span><span class="o">=</span><span class="m">100</span><span class="o">)</span>
</pre></div>
</div>
</section>
<section id="padtransformer">
<h3><span class="section-number">6.3.15. </span>PadTransformer<a class="headerlink" href="#padtransformer" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">ïƒ</a></h3>
<p><strong>è¯´æ˜</strong>ï¼š</p>
<p>é€šè¿‡ç”¨ç›®æ ‡å¤§å°çš„sizeå€¼é™¤ä»¥è¾“å…¥å›¾ç‰‡å®½æˆ–è€…é«˜é‡Œçš„æœ€å¤§å€¼ä¸ºç³»æ•°ï¼Œç„¶åä½¿ç”¨è¿™ä¸ªç³»æ•°ä¹˜ä»¥åŸæœ‰çš„å®½é«˜ï¼Œresizeå›¾ç‰‡ã€‚
ç„¶åæ ¹æ®æ–°å›¾ç‰‡çš„å¤§å°ï¼Œé™¤ä»¥size_divisoråå‘ä¸Šå–æ•´åï¼Œå†ä¹˜ä»¥size_divisorï¼Œä¸ºæ–°çš„å®½é«˜ï¼Œç”Ÿæˆæ–°çš„å›¾ç‰‡çš„æ“ä½œã€‚</p>
<p><strong>å‚æ•°</strong>ï¼š</p>
<ul class="simple">
<li><p>size_divisorï¼šå¤§å°é™¤æ•° ï¼Œé»˜è®¤å€¼ä¸º128ã€‚</p></li>
<li><p>target_sizeï¼šç›®æ ‡å¤§å°ï¼Œé»˜è®¤å€¼ä¸º512ã€‚</p></li>
</ul>
<p><strong>ä½¿ç”¨ä¸¾ä¾‹</strong>ï¼š</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># padå¤§å°ä¸º1024*1024</span>
PadTransformer<span class="o">(</span><span class="nv">size_divisor</span><span class="o">=</span><span class="m">1024</span>, <span class="nv">target_size</span><span class="o">=</span><span class="m">1024</span><span class="o">)</span>
</pre></div>
</div>
</section>
<section id="shortsideresizetransformer">
<h3><span class="section-number">6.3.16. </span>ShortSideResizeTransformer<a class="headerlink" href="#shortsideresizetransformer" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">ïƒ</a></h3>
<p><strong>è¯´æ˜</strong>ï¼š</p>
<p>æ ¹æ®æœŸæœ›çš„çŸ­è¾¹çš„é•¿åº¦ï¼Œä½¿ç”¨ç°åœ¨çš„é•¿çŸ­è¾¹çš„æ¯”ä¾‹ï¼Œä¸­å¿ƒè£å‰ªå‡ºæ–°çš„å›¾ç‰‡å¤§å°çš„æ“ä½œã€‚</p>
<p><strong>å‚æ•°</strong>ï¼š</p>
<ul>
<li><p>short_sizeï¼šé¢„æœŸçš„çŸ­è¾¹çš„é•¿åº¦ã€‚</p></li>
<li><p>data_typeï¼šè¾“å‡ºç»“æœçš„ç±»å‹ï¼Œå–å€¼èŒƒå›´ä¸º(â€œfloatâ€,â€uint8â€)ï¼Œé»˜è®¤å–å€¼â€float32â€, ä»¥ float32 ç±»å‹è¾“å‡ºï¼Œè®¾ç½®ä¸ºuint8æ—¶ï¼Œè¾“å‡ºç±»å‹å°†ä¸ºuint8ã€‚</p></li>
<li><p>interpolationï¼šæŒ‡å®šæ’å€¼çš„æ–¹å¼ï¼Œå–å€¼èŒƒå›´ä¸º opencv ä¸­é‡‡ç”¨çš„æ’å€¼æ–¹å¼ï¼Œé»˜è®¤ä¸ºç©ºã€‚</p>
<p>ç›®å‰interpolationä»…æ”¯æŒä¸ºç©ºæˆ–opencvä¸­çš„INTER_CUBICä¸¤ç§æ’å€¼æ–¹æ³•ï¼Œå½“interpolationä¸ºç©ºæ—¶ï¼Œé»˜è®¤ä½¿ç”¨INTER_LINEARæ–¹å¼ã€‚</p>
<p>ä»¥ä¸‹ä¸ºopencvä¸­æ”¯æŒçš„æ’å€¼æ–¹å¼åŠè¯´æ˜ï¼ˆç›®å‰æœªæ”¯æŒçš„æ’å€¼æ–¹å¼å°†åœ¨åç»­è¿­ä»£ä¸­é€æ­¥æ”¯æŒï¼‰ï¼š</p>
<ul class="simple">
<li><p>INTER_NEARESTï¼Œæœ€è¿‘é‚»æ’å€¼ï¼›</p></li>
<li><p>INTER_LINEARï¼ŒåŒçº¿æ€§æ’å€¼ï¼Œå½“interpolationä¸ºç©ºæ—¶ï¼Œé»˜è®¤ä½¿ç”¨è¿™ç§æ–¹æ³•ã€‚</p></li>
<li><p>INTER_CUBICï¼ŒåŒä¸‰æ¬¡æ’å€¼4x4åƒç´ é‚»åŸŸå†…çš„åŒç«‹æ–¹æ’å€¼ã€‚</p></li>
<li><p>INTER_AREAï¼Œä½¿ç”¨åƒç´ é¢ç§¯å…³ç³»é‡é‡‡æ ·ã€‚å®ƒå¯èƒ½æ˜¯å›¾åƒæŠ½å–çš„é¦–é€‰æ–¹æ³•ï¼Œå› ä¸ºå®ƒå¯ä»¥æä¾›æ— è«å°”æ¡çº¹çš„ç»“æœã€‚ä½†æ˜¯å½“å›¾åƒè¢«ç¼©æ”¾æ—¶ï¼Œå®ƒç±»ä¼¼äºINTER_NEARESTæ–¹æ³•ã€‚</p></li>
<li><p>INTER_LANCZOS4ï¼Œ8x8é‚»åŸŸçš„Lanczosæ’å€¼ã€‚</p></li>
<li><p>INTER_LINEAR_EXACTï¼Œä½ç²¾ç¡®åŒçº¿æ€§æ’å€¼ã€‚</p></li>
<li><p>INTER_NEAREST_EXACTï¼Œä½ç²¾ç¡®æœ€è¿‘é‚»æ’å€¼ã€‚è¿™å°†äº§ç”Ÿä¸PILã€scikit-imageæˆ–Matlabä¸­çš„æœ€è¿‘é‚»æ–¹æ³•ç›¸åŒçš„ç»“æœã€‚</p></li>
<li><p>INTER_MAXï¼Œæ’å€¼ä»£ç çš„æ©ç ã€‚</p></li>
<li><p>WARP_FILL_OUTLIERSï¼Œæ ‡å¿—ï¼Œå¡«å……æ‰€æœ‰ç›®æ ‡å›¾åƒåƒç´ ã€‚å¦‚æœå…¶ä¸­ä¸€äº›å¯¹åº”äºæºå›¾åƒä¸­çš„å¼‚å¸¸å€¼ï¼Œåˆ™å°†å®ƒä»¬è®¾ç½®ä¸ºé›¶ã€‚</p></li>
<li><p>WARP_INVERSE_MAPï¼Œæ ‡å¿—ï¼Œé€†å˜æ¢ã€‚</p></li>
</ul>
</li>
</ul>
<p><strong>ä½¿ç”¨ä¸¾ä¾‹</strong>ï¼š</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># å°†çŸ­è¾¹å¤§å°è°ƒæ•´ä¸º256ï¼Œæ’å€¼æ–¹å¼ä¸ºåŒçº¿æ€§æ’å€¼</span>
ShortSideResizeTransformer<span class="o">(</span><span class="nv">short_size</span><span class="o">=</span><span class="m">256</span><span class="o">)</span>

<span class="c1"># å°†çŸ­è¾¹å¤§å°è°ƒæ•´ä¸º256ï¼Œæ’å€¼æ–¹å¼ä¸º 8x8åƒç´ é‚»åŸŸå†…çš„Lanczosæ’å€¼</span>
ShortSideResizeTransformer<span class="o">(</span><span class="nv">short_size</span><span class="o">=</span><span class="m">256</span>, <span class="nv">interpolation</span><span class="o">=</span>Image.LANCZOS4<span class="o">)</span>
</pre></div>
</div>
</section>
<section id="paddedcentercroptransformer">
<h3><span class="section-number">6.3.17. </span>PaddedCenterCropTransformer<a class="headerlink" href="#paddedcentercroptransformer" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">ïƒ</a></h3>
<p><strong>è¯´æ˜</strong>ï¼š</p>
<p>ä½¿ç”¨å¡«å……çš„æ–¹å¼å¯¹å›¾ç‰‡ä¸­å¿ƒè¿›è¡Œè£å‰ªçš„æ“ä½œã€‚</p>
<div class="admonition attention">
<p class="admonition-title">æ³¨æ„</p>
<p>ä»…é€‚ç”¨äºEfficientNet-liteç›¸å…³å®ä¾‹æ¨¡å‹ã€‚</p>
<p>è®¡ç®—æ–¹å¼ä¸ºï¼š</p>
<ol class="arabic simple">
<li><p>è®¡ç®—ç³»æ•°ï¼Œint((float( image_size ) / ( image_size + crop_pad ))ã€‚</p></li>
<li><p>è®¡ç®—ä¸­å¿ƒsizeçš„å¤§å°ï¼Œ ç³»æ•° * np.minimum( åŸå§‹å›¾ç‰‡çš„é«˜åº¦, åŸå§‹å›¾ç‰‡çš„å®½åº¦ ))ã€‚</p></li>
<li><p>æ ¹æ®è®¡ç®—å‡ºæ¥çš„sizeå¤§å°ï¼Œåšä¸­å¿ƒè£å‰ªã€‚</p></li>
</ol>
</div>
<p><strong>å‚æ•°</strong>ï¼š</p>
<ul class="simple">
<li><p>image_sizeï¼šå›¾ç‰‡çš„å¤§å°ï¼Œé»˜è®¤å€¼ä¸º224ã€‚</p></li>
<li><p>crop_padï¼šä¸­å¿ƒå¡«å……çš„å¤§å°ï¼Œé»˜è®¤å€¼ä¸º32ã€‚</p></li>
</ul>
<p><strong>ä½¿ç”¨ä¸¾ä¾‹</strong>ï¼š</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># è£å‰ªå¤§å°ä¸º240*240ï¼Œå¡«å……å€¼ä¸º32</span>
PaddedCenterCropTransformer<span class="o">(</span><span class="nv">image_size</span><span class="o">=</span><span class="m">240</span>, <span class="nv">crop_pad</span><span class="o">=</span><span class="m">32</span><span class="o">)</span>

<span class="c1"># è£å‰ªå¤§å°ä¸º224*224ï¼Œå¡«å……å€¼ä¸º32</span>
PaddedCenterCropTransformer<span class="o">()</span>
</pre></div>
</div>
</section>
<section id="bgr2rgbtransformer">
<h3><span class="section-number">6.3.18. </span>BGR2RGBTransformer<a class="headerlink" href="#bgr2rgbtransformer" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">ïƒ</a></h3>
<p><strong>è¯´æ˜</strong>ï¼š</p>
<p>å°†è¾“å…¥æ ¼å¼ç”±BGRè½¬æˆRGBçš„æ“ä½œã€‚</p>
<p><strong>å‚æ•°</strong>ï¼š</p>
<ul class="simple">
<li><p>data_formatï¼šæ•°æ®æ ¼å¼ï¼Œå–å€¼èŒƒå›´ä¸º(CHW,HWC)ï¼Œé»˜è®¤å€¼ä¸ºCHWã€‚</p></li>
</ul>
<p><strong>ä½¿ç”¨ä¸¾ä¾‹</strong>ï¼š</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># layoutä¸ºNCHWæ—¶ï¼ŒåšBGRè½¬ä¸ºRGB</span>
BGR2RGBTransformer<span class="o">()</span>

<span class="c1"># layoutä¸ºNHWCæ—¶ï¼ŒåšBGRè½¬ä¸ºRGB</span>
BGR2RGBTransformer<span class="o">(</span><span class="nv">data_format</span><span class="o">=</span><span class="s2">&quot;HWC&quot;</span><span class="o">)</span>
</pre></div>
</div>
</section>
<section id="rgb2bgrtransformer">
<h3><span class="section-number">6.3.19. </span>RGB2BGRTransformer<a class="headerlink" href="#rgb2bgrtransformer" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">ïƒ</a></h3>
<p><strong>è¯´æ˜</strong>ï¼š</p>
<p>å°†è¾“å…¥æ ¼å¼ç”±RGBè½¬æˆBGRçš„æ“ä½œã€‚</p>
<p><strong>å‚æ•°</strong>ï¼š</p>
<ul class="simple">
<li><p>data_formatï¼šæ•°æ®æ ¼å¼ï¼Œå–å€¼èŒƒå›´ä¸º(CHW,HWC)ï¼Œé»˜è®¤å€¼ä¸ºCHWã€‚</p></li>
</ul>
<p><strong>ä½¿ç”¨ä¸¾ä¾‹</strong>ï¼š</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># layoutä¸ºNCHWæ—¶ï¼ŒåšRGBè½¬æˆBGR</span>
RGB2BGRTransformer<span class="o">()</span>

<span class="c1"># layoutä¸ºNHWCæ—¶ï¼ŒåšRGBè½¬æˆBGR</span>
RGB2BGRTransformer<span class="o">(</span><span class="nv">data_format</span><span class="o">=</span><span class="s2">&quot;HWC&quot;</span><span class="o">)</span>
</pre></div>
</div>
</section>
<section id="rgb2graytransformer">
<h3><span class="section-number">6.3.20. </span>RGB2GRAYTransformer<a class="headerlink" href="#rgb2graytransformer" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">ïƒ</a></h3>
<p><strong>è¯´æ˜</strong>ï¼š</p>
<p>å°†è¾“å…¥æ ¼å¼ç”±RGBè½¬æˆGRAYçš„æ“ä½œã€‚</p>
<p><strong>å‚æ•°</strong>ï¼š</p>
<ul class="simple">
<li><p>data_formatï¼šè¾“å…¥çš„layoutç±»å‹ï¼Œå–å€¼èŒƒå›´(â€œCHWâ€,â€HWCâ€)ï¼Œé»˜è®¤ä¸ºâ€CHWâ€ã€‚</p></li>
</ul>
<p><strong>ä½¿ç”¨ä¸¾ä¾‹</strong>ï¼š</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># layoutä¸ºNCHWæ—¶ï¼ŒåšRGBè½¬æˆGRAY</span>
RGB2GRAYTransformer<span class="o">(</span><span class="nv">data_format</span><span class="o">=</span><span class="s1">&#39;CHW&#39;</span><span class="o">)</span>

<span class="c1"># layoutä¸ºNHWCæ—¶ï¼ŒåšRGBè½¬æˆGRAY</span>
RGB2GRAYTransformer<span class="o">(</span><span class="nv">data_format</span><span class="o">=</span><span class="s1">&#39;HWC&#39;</span><span class="o">)</span>
</pre></div>
</div>
</section>
<section id="bgr2graytransformer">
<h3><span class="section-number">6.3.21. </span>BGR2GRAYTransformer<a class="headerlink" href="#bgr2graytransformer" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">ïƒ</a></h3>
<p><strong>è¯´æ˜</strong>ï¼š</p>
<p>å°†è¾“å…¥æ ¼å¼ç”± BGR è½¬æˆ GRAY çš„æ“ä½œã€‚</p>
<p><strong>å‚æ•°</strong>ï¼š</p>
<ul class="simple">
<li><p>data_formatï¼šè¾“å…¥çš„layoutç±»å‹ï¼Œå–å€¼èŒƒå›´ [â€œCHWâ€,â€HWCâ€]ï¼Œé»˜è®¤å€¼ä¸ºâ€CHWâ€ã€‚</p></li>
</ul>
<p><strong>ä½¿ç”¨ä¸¾ä¾‹</strong>ï¼š</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># layoutä¸ºNCHWæ—¶ï¼ŒåšBGRè½¬æˆGRAY</span>
BGR2GRAYTransformer<span class="o">(</span><span class="nv">data_format</span><span class="o">=</span><span class="s1">&#39;CHW&#39;</span><span class="o">)</span>

<span class="c1"># layoutä¸ºNHWCæ—¶ï¼ŒåšBGRè½¬æˆGRAY</span>
BGR2GRAYTransformer<span class="o">(</span><span class="nv">data_format</span><span class="o">=</span><span class="s1">&#39;HWC&#39;</span><span class="o">)</span>
</pre></div>
</div>
</section>
<section id="rgb2gray-128transformer">
<h3><span class="section-number">6.3.22. </span>RGB2GRAY_128Transformer<a class="headerlink" href="#rgb2gray-128transformer" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">ïƒ</a></h3>
<p><strong>è¯´æ˜</strong>ï¼š</p>
<p>è¾“å…¥æ ¼å¼ç”±RGBè½¬æˆGRAY_128çš„æ“ä½œã€‚GRAY_128å–å€¼èŒƒå›´ä¸º(-128,127)ã€‚</p>
<p><strong>å‚æ•°</strong>ï¼š</p>
<ul class="simple">
<li><p>data_formatï¼šè¾“å…¥çš„layoutç±»å‹ï¼Œå–å€¼èŒƒå›´ä¸º[â€œCHWâ€,â€HWCâ€]ï¼Œé»˜è®¤å€¼ä¸ºâ€CHWâ€ï¼Œæ­¤é¡¹ä¸ºå¿…å¡«é¡¹ã€‚</p></li>
</ul>
<p><strong>ä½¿ç”¨ä¸¾ä¾‹</strong>ï¼š</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># layoutä¸ºNCHWæ—¶ï¼ŒåšRGBè½¬æˆGRAY_128</span>
RGB2GRAY_128Transformer<span class="o">(</span><span class="nv">data_format</span><span class="o">=</span><span class="s1">&#39;CHW&#39;</span><span class="o">)</span>

<span class="c1"># layoutä¸ºNHWCæ—¶ï¼ŒåšRGBè½¬æˆGRAY_128</span>
RGB2GRAY_128Transformer<span class="o">(</span><span class="nv">data_format</span><span class="o">=</span><span class="s1">&#39;HWC&#39;</span><span class="o">)</span>
</pre></div>
</div>
</section>
<section id="rgb2yuv444transformer">
<h3><span class="section-number">6.3.23. </span>RGB2YUV444Transformer<a class="headerlink" href="#rgb2yuv444transformer" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">ïƒ</a></h3>
<p><strong>è¯´æ˜</strong>ï¼š</p>
<p>å°†è¾“å…¥æ ¼å¼ç”±RGBè½¬æˆYUV444çš„æ“ä½œã€‚</p>
<p><strong>å‚æ•°</strong>ï¼š</p>
<ul class="simple">
<li><p>data_formatï¼šè¾“å…¥çš„layoutç±»å‹ï¼Œå–å€¼èŒƒå›´ä¸º[â€œCHWâ€, â€œHWCâ€]ï¼Œé»˜è®¤å€¼ä¸ºâ€CHWâ€ï¼Œæ­¤é¡¹ä¸ºå¿…å¡«é¡¹ã€‚</p></li>
</ul>
<p><strong>ä½¿ç”¨ä¸¾ä¾‹</strong>ï¼š</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># layoutä¸ºNCHWæ—¶ï¼ŒåšBGRè½¬æˆYUV444</span>
BGR2YUV444Transformer<span class="o">(</span><span class="nv">data_format</span><span class="o">=</span><span class="s1">&#39;CHW&#39;</span><span class="o">)</span>

<span class="c1"># layoutä¸ºNHWCæ—¶ï¼ŒåšBGRè½¬æˆYUV444</span>
BGR2YUV444Transformer<span class="o">(</span><span class="nv">data_format</span><span class="o">=</span><span class="s1">&#39;HWC&#39;</span><span class="o">)</span>
</pre></div>
</div>
</section>
<section id="bgr2yuv444transformer">
<h3><span class="section-number">6.3.24. </span>BGR2YUV444Transformer<a class="headerlink" href="#bgr2yuv444transformer" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">ïƒ</a></h3>
<p><strong>è¯´æ˜</strong>ï¼š</p>
<p>å°†è¾“å…¥æ ¼å¼ç”±BGRè½¬æˆYUV444çš„æ“ä½œã€‚</p>
<p><strong>å‚æ•°</strong>ï¼š</p>
<ul class="simple">
<li><p>data_formatï¼šè¾“å…¥çš„layoutç±»å‹ï¼Œå–å€¼èŒƒå›´ä¸º[â€œCHWâ€,â€HWCâ€]ï¼Œé»˜è®¤å€¼ä¸º â€œCHWâ€ï¼Œæ­¤é¡¹ä¸ºå¿…å¡«é¡¹ã€‚</p></li>
</ul>
<p><strong>ä½¿ç”¨ä¸¾ä¾‹</strong>ï¼š</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># layoutä¸ºNCHWæ—¶ï¼ŒåšBGRè½¬æˆYUV444</span>
BGR2YUV444Transformer<span class="o">(</span><span class="nv">data_format</span><span class="o">=</span><span class="s1">&#39;CHW&#39;</span><span class="o">)</span>

<span class="c1"># layoutä¸ºNHWCæ—¶ï¼ŒåšBGRè½¬æˆYUV444</span>
BGR2YUV444Transformer<span class="o">(</span><span class="nv">data_format</span><span class="o">=</span><span class="s1">&#39;HWC&#39;</span><span class="o">)</span>
</pre></div>
</div>
</section>
<section id="bgr2yuv444-128transformer">
<h3><span class="section-number">6.3.25. </span>BGR2YUV444_128Transformer<a class="headerlink" href="#bgr2yuv444-128transformer" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">ïƒ</a></h3>
<p><strong>è¯´æ˜</strong>ï¼š</p>
<p>å°†è¾“å…¥æ ¼å¼ç”±BGRè½¬æˆYUV444_128çš„æ“ä½œã€‚YUV444_128å–å€¼èŒƒå›´ä¸º(-128,127)ã€‚</p>
<p><strong>å‚æ•°</strong>ï¼š</p>
<ul class="simple">
<li><p>data_formatï¼šè¾“å…¥çš„layoutç±»å‹ï¼Œå–å€¼èŒƒå›´ä¸º[â€œCHWâ€,â€HWCâ€]ï¼Œé»˜è®¤å€¼ä¸º â€œCHWâ€ï¼Œæ­¤é¡¹ä¸ºå¿…å¡«é¡¹ã€‚</p></li>
</ul>
<p><strong>ä½¿ç”¨ä¸¾ä¾‹</strong>ï¼š</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># layoutä¸ºNCHWæ—¶ï¼ŒåšBGRè½¬æˆYUV444_128</span>
BGR2YUV444_128Transformer<span class="o">(</span><span class="nv">data_format</span><span class="o">=</span><span class="s1">&#39;CHW&#39;</span><span class="o">)</span>

<span class="c1"># layoutä¸ºNHWCæ—¶ï¼ŒåšBGRè½¬æˆYUV444_128</span>
BGR2YUV444_128Transformer<span class="o">(</span><span class="nv">data_format</span><span class="o">=</span><span class="s1">&#39;HWC&#39;</span><span class="o">)</span>
</pre></div>
</div>
</section>
<section id="rgb2yuv444-128transformer">
<h3><span class="section-number">6.3.26. </span>RGB2YUV444_128Transformer<a class="headerlink" href="#rgb2yuv444-128transformer" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">ïƒ</a></h3>
<p><strong>è¯´æ˜</strong>ï¼š</p>
<p>å°†è¾“å…¥æ ¼å¼ç”±RGBè½¬æˆYUV444_128çš„æ“ä½œã€‚YUV444_128å–å€¼èŒƒå›´ä¸º(-128,127)ã€‚</p>
<p><strong>å‚æ•°</strong>ï¼š</p>
<ul class="simple">
<li><p>data_formatï¼šè¾“å…¥çš„layoutç±»å‹ï¼Œå–å€¼èŒƒå›´ä¸º[â€œCHWâ€,â€HWCâ€]ï¼Œé»˜è®¤å€¼ä¸ºâ€CHWâ€ï¼Œæ­¤é¡¹ä¸ºå¿…å¡«é¡¹ã€‚</p></li>
</ul>
<p><strong>ä½¿ç”¨ä¸¾ä¾‹</strong>ï¼š</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># layoutä¸ºNCHW æ—¶ï¼ŒåšRGBè½¬æˆYUV444_128</span>
RGB2YUV444_128Transformer<span class="o">(</span><span class="nv">data_format</span><span class="o">=</span><span class="s1">&#39;CHW&#39;</span><span class="o">)</span>

<span class="c1"># layoutä¸ºNHWCæ—¶ï¼ŒåšRGBè½¬æˆ YUV444_128</span>
RGB2YUV444_128Transformer<span class="o">(</span><span class="nv">data_format</span><span class="o">=</span><span class="s1">&#39;HWC&#39;</span><span class="o">)</span>
</pre></div>
</div>
</section>
<section id="bgr2yuvbt601videotransformer">
<h3><span class="section-number">6.3.27. </span>BGR2YUVBT601VIDEOTransformer<a class="headerlink" href="#bgr2yuvbt601videotransformer" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">ïƒ</a></h3>
<p><strong>è¯´æ˜</strong>ï¼š</p>
<p>å°†è¾“å…¥æ ¼å¼ç”±BGRè½¬æˆYUV_BT601_Video_Rangeçš„æ“ä½œã€‚</p>
<p>YUV_BT601_Video_Rangeï¼ŒæŸäº›æ‘„åƒå¤´è¾“å…¥æ•°æ®éƒ½æ˜¯YUV BT601(Video Range)æ ¼å¼çš„ï¼Œå–å€¼èŒƒå›´ä¸º16~235ï¼Œè¯¥transformerå°±æ˜¯é€‚é…è¿™ç§æ ¼å¼çš„æ•°æ®äº§ç”Ÿçš„ã€‚</p>
<p><strong>å‚æ•°</strong>ï¼š</p>
<ul class="simple">
<li><p>data_formatï¼šè¾“å…¥çš„layoutç±»å‹ï¼Œå–å€¼èŒƒå›´ä¸º[â€œCHWâ€,â€HWCâ€]ï¼Œé»˜è®¤å€¼ä¸ºâ€CHWâ€ï¼Œæ­¤é¡¹ä¸ºå¿…å¡«é¡¹ã€‚</p></li>
</ul>
<p><strong>ä½¿ç”¨ä¸¾ä¾‹</strong>ï¼š</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># layoutä¸º NCHWæ—¶ï¼ŒåšBGRè½¬æˆYUV_BT601_Video_Range</span>
BGR2YUVBT601VIDEOTransformer<span class="o">(</span><span class="nv">data_format</span><span class="o">=</span><span class="s1">&#39;CHW&#39;</span><span class="o">)</span>

<span class="c1"># layoutä¸ºNHWCæ—¶ï¼ŒåšBGRè½¬æˆYUV_BT601_Video_Range</span>
BGR2YUVBT601VIDEOTransformer<span class="o">(</span><span class="nv">data_format</span><span class="o">=</span><span class="s1">&#39;HWC&#39;</span><span class="o">)</span>
</pre></div>
</div>
</section>
<section id="rgb2yuvbt601videotransformer">
<h3><span class="section-number">6.3.28. </span>RGB2YUVBT601VIDEOTransformer<a class="headerlink" href="#rgb2yuvbt601videotransformer" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">ïƒ</a></h3>
<p><strong>è¯´æ˜</strong>ï¼š</p>
<p>å°†è¾“å…¥æ ¼å¼ç”±RGBè½¬æˆYUV_BT601_Video_Rangeçš„æ“ä½œã€‚</p>
<p>YUV_BT601_Video_Rangeï¼ŒæŸäº›æ‘„åƒå¤´è¾“å…¥æ•°æ®éƒ½æ˜¯YUV BT601(Video Range)æ ¼å¼çš„ï¼Œå–å€¼èŒƒå›´ä¸º16~235ï¼Œè¯¥transformerå°±æ˜¯é€‚é…è¿™ç§æ ¼å¼çš„æ•°æ®äº§ç”Ÿçš„ã€‚</p>
<p><strong>å‚æ•°</strong>ï¼š</p>
<ul class="simple">
<li><p>data_formatï¼šè¾“å…¥çš„layoutç±»å‹ï¼Œå–å€¼èŒƒå›´ä¸º[â€œCHWâ€,â€HWCâ€]ï¼Œé»˜è®¤å€¼ä¸ºâ€CHWâ€ï¼Œæ­¤é¡¹ä¸ºå¿…å¡«é¡¹ã€‚</p></li>
</ul>
<p><strong>ä½¿ç”¨ä¸¾ä¾‹</strong>ï¼š</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># layoutä¸ºNCHWæ—¶ï¼ŒåšRGBè½¬æˆYUV_BT601_Video_Range</span>
RGB2YUVBT601VIDEOTransformer<span class="o">(</span><span class="nv">data_format</span><span class="o">=</span><span class="s1">&#39;CHW&#39;</span><span class="o">)</span>

<span class="c1"># layoutä¸ºNHWCæ—¶ï¼ŒåšRGBè½¬æˆYUV_BT601_Video_Range</span>
RGB2YUVBT601VIDEOTransformer<span class="o">(</span><span class="nv">data_format</span><span class="o">=</span><span class="s1">&#39;HWC&#39;</span><span class="o">)</span>
</pre></div>
</div>
</section>
<section id="yuvtransformer">
<h3><span class="section-number">6.3.29. </span>YUVTransformer<a class="headerlink" href="#yuvtransformer" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">ïƒ</a></h3>
<p><strong>è¯´æ˜</strong>ï¼š</p>
<p>å°†è¾“å…¥æ ¼å¼è½¬æˆYUV444çš„æ“ä½œã€‚</p>
<p><strong>å‚æ•°</strong>ï¼š</p>
<ul class="simple">
<li><p>color_sequenceï¼šé¢œè‰²åºåˆ—ï¼Œæ­¤é¡¹ä¸ºå¿…å¡«é¡¹ã€‚</p></li>
</ul>
<p><strong>ä½¿ç”¨ä¸¾ä¾‹</strong>ï¼š</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># å°†BGRè¯»å…¥çš„å›¾ç‰‡è½¬ä¸ºYUV444</span>
YUVTransformer<span class="o">(</span><span class="nv">color_sequence</span><span class="o">=</span><span class="s2">&quot;BGR&quot;</span><span class="o">)</span>

<span class="c1"># å°†RGBè¯»å…¥çš„å›¾ç‰‡è½¬ä¸ºYUV444</span>
YUVTransformer<span class="o">(</span><span class="nv">color_sequence</span><span class="o">=</span><span class="s2">&quot;RGB&quot;</span><span class="o">)</span>
</pre></div>
</div>
</section>
<section id="reducechanneltransformer">
<h3><span class="section-number">6.3.30. </span>ReduceChannelTransformer<a class="headerlink" href="#reducechanneltransformer" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">ïƒ</a></h3>
<p><strong>è¯´æ˜</strong>ï¼š</p>
<p>å°†Cé€šé“ç¼©å‡ä¸ºå•é€šé“çš„æ“ä½œã€‚è¯¥transformerä¸»è¦æ˜¯é’ˆå¯¹äºCé€šé“ï¼Œå¦‚shapeä¸º1*3*224*224 æ”¹ä¸º1*1*224*224ã€‚ ä½¿ç”¨æ—¶layoutä¸€å®šè¦å’Œdata_formatå€¼å¯¹é½ï¼Œé¿å…é€ æˆåˆ é”™é€šé“ã€‚</p>
<p><strong>å‚æ•°</strong>ï¼š</p>
<ul class="simple">
<li><p>data_formatï¼šè¾“å…¥çš„layoutç±»å‹ï¼Œå–å€¼èŒƒå›´ä¸º[â€œCHWâ€, â€œHWCâ€]ï¼Œé»˜è®¤å€¼ä¸ºâ€CHWâ€ã€‚</p></li>
</ul>
<p><strong>ä½¿ç”¨ä¸¾ä¾‹</strong>ï¼š</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># åˆ é™¤layoutä¸ºNCHWçš„Cé€šé“</span>
ReduceChannelTransformer<span class="o">()</span>
<span class="c1"># æˆ–è€…</span>
ReduceChannelTransformer<span class="o">(</span><span class="nv">data_format</span><span class="o">=</span><span class="s2">&quot;CHW&quot;</span><span class="o">)</span>

<span class="c1"># åˆ é™¤layoutä¸ºNHWCçš„Cé€šé“</span>
ReduceChannelTransformer<span class="o">(</span><span class="nv">data_format</span><span class="o">=</span><span class="s2">&quot;HWC&quot;</span><span class="o">)</span>
</pre></div>
</div>
</section>
<section id="bgr2nv12transformer">
<h3><span class="section-number">6.3.31. </span>BGR2NV12Transformer<a class="headerlink" href="#bgr2nv12transformer" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">ïƒ</a></h3>
<p><strong>è¯´æ˜</strong>ï¼š</p>
<p>å°†è¾“å…¥æ ¼å¼ç”±BGRè½¬æˆNV12çš„æ“ä½œã€‚</p>
<p><strong>å‚æ•°</strong>ï¼š</p>
<ul class="simple">
<li><p>data_formatï¼šè¾“å…¥çš„layoutç±»å‹ï¼Œå–å€¼èŒƒå›´ä¸º[â€œCHWâ€,â€HWCâ€]ï¼Œé»˜è®¤å€¼ä¸ºâ€CHWâ€ã€‚</p></li>
<li><p>cvt_modeï¼šcvtæ¨¡å¼ï¼Œå–å€¼èŒƒå›´ä¸º(rgb_calcï¼Œopencv)ï¼Œé»˜è®¤å€¼ä¸ºrgb_calcã€‚</p>
<ul>
<li><p>rgb_calcï¼Œé‡‡ç”¨mergeUVçš„æ–¹å¼å¤„ç†å›¾ç‰‡ï¼›</p></li>
<li><p>opencvï¼Œé‡‡ç”¨opencvçš„æ–¹å¼å¤„ç†å›¾ç‰‡ã€‚</p></li>
</ul>
</li>
</ul>
<p><strong>ä½¿ç”¨ä¸¾ä¾‹</strong>ï¼š</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># layoutä¸ºNCHWæ—¶ï¼Œç”±BGRè½¬ä¸ºNV12ï¼Œé‡‡ç”¨rgb_calcæ¨¡å¼å¤„ç†å›¾ç‰‡</span>
BGR2NV12Transformer<span class="o">()</span>
<span class="c1"># æˆ–è€…</span>
BGR2NV12Transformer<span class="o">(</span><span class="nv">data_format</span><span class="o">=</span><span class="s2">&quot;CHW&quot;</span><span class="o">)</span>

<span class="c1"># layoutä¸ºNHWCæ—¶ï¼Œç”±BGRè½¬ä¸ºNV12ï¼Œé‡‡ç”¨opencvæ¨¡å¼å¤„ç†å›¾ç‰‡</span>
BGR2NV12Transformer<span class="o">(</span><span class="nv">data_format</span><span class="o">=</span><span class="s2">&quot;HWC&quot;</span>, <span class="nv">cvt_mode</span><span class="o">=</span><span class="s2">&quot;opencv&quot;</span><span class="o">)</span>
</pre></div>
</div>
</section>
<section id="rgb2nv12transformer">
<h3><span class="section-number">6.3.32. </span>RGB2NV12Transformer<a class="headerlink" href="#rgb2nv12transformer" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">ïƒ</a></h3>
<p><strong>è¯´æ˜</strong>ï¼š</p>
<p>å°†è¾“å…¥æ ¼å¼ç”±RGBè½¬æˆNV12çš„æ“ä½œã€‚</p>
<p><strong>å‚æ•°</strong>ï¼š</p>
<ul class="simple">
<li><p>data_formatï¼šè¾“å…¥çš„ layout ç±»å‹ï¼Œå–å€¼èŒƒå›´ [â€œCHWâ€, â€œHWCâ€], é»˜è®¤å€¼ä¸ºâ€CHWâ€ã€‚</p></li>
<li><p>cvt_modeï¼šcvtæ¨¡å¼ï¼Œå–å€¼èŒƒå›´ä¸º(rgb_calc,opencv)ï¼Œé»˜è®¤å€¼ä¸ºrgb_calcã€‚</p>
<ul>
<li><p>rgb_calcï¼Œé‡‡ç”¨mergeUVçš„æ–¹å¼å¤„ç†å›¾ç‰‡ï¼›</p></li>
<li><p>opencvï¼Œé‡‡ç”¨opencvçš„æ–¹å¼å¤„ç†å›¾ç‰‡ã€‚</p></li>
</ul>
</li>
</ul>
<p><strong>ä½¿ç”¨ä¸¾ä¾‹</strong>ï¼š</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># layoutä¸ºNCHWæ—¶ï¼Œæœ‰RGBè½¬ä¸ºNV12ï¼Œé‡‡ç”¨rgb_calcæ¨¡å¼å¤„ç†å›¾ç‰‡</span>
RGB2NV12Transformer<span class="o">()</span>
<span class="c1"># æˆ–è€…</span>
RGB2NV12Transformer<span class="o">(</span><span class="nv">data_format</span><span class="o">=</span><span class="s2">&quot;CHW&quot;</span><span class="o">)</span>

<span class="c1"># layoutä¸ºNHWCæ—¶ï¼Œæœ‰RGBè½¬ä¸ºNV12ï¼Œé‡‡ç”¨opencvæ¨¡å¼å¤„ç†å›¾ç‰‡</span>
RGB2NV12Transformer<span class="o">(</span><span class="nv">data_format</span><span class="o">=</span><span class="s2">&quot;HWC&quot;</span>, <span class="nv">cvt_mode</span><span class="o">=</span><span class="s2">&quot;opencv&quot;</span><span class="o">)</span>
</pre></div>
</div>
</section>
<section id="nv12toyuv444transformer">
<h3><span class="section-number">6.3.33. </span>NV12ToYUV444Transformer<a class="headerlink" href="#nv12toyuv444transformer" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">ïƒ</a></h3>
<p><strong>è¯´æ˜</strong>ï¼š</p>
<p>å°†è¾“å…¥æ ¼å¼ç”±NV12è½¬æˆYUV444çš„æ“ä½œã€‚</p>
<p><strong>å‚æ•°</strong>ï¼š</p>
<ul class="simple">
<li><p>target_sizeï¼šç›®æ ‡å¤§å°ï¼Œå€¼ä¸ºå…ƒç»„ï¼Œå¦‚(240,240)ã€‚</p></li>
<li><p>yuv444_output_layoutï¼šyuv444è¾“å‡ºçš„layoutï¼Œå–å€¼èŒƒå›´ä¸º(HWC,CHW)ï¼Œé»˜è®¤å€¼ä¸ºâ€HWCâ€ã€‚</p></li>
</ul>
<p><strong>ä½¿ç”¨ä¸¾ä¾‹</strong>ï¼š</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># layoutä¸ºNCHW ï¼Œå¤§å°ä¸º768*768, nv12è½¬yuv444</span>
NV12ToYUV444Transformer<span class="o">(</span><span class="nv">target_size</span><span class="o">=(</span><span class="m">768</span>, <span class="m">768</span><span class="o">))</span>

<span class="c1"># layoutä¸ºNHWC ï¼Œå¤§å°ä¸º224*224, nv12è½¬yuv444</span>
NV12ToYUV444Transformer<span class="o">((</span><span class="m">224</span>, <span class="m">224</span><span class="o">)</span>, <span class="nv">yuv444_output_layout</span><span class="o">=</span><span class="s2">&quot;HWC&quot;</span><span class="o">)</span>
</pre></div>
</div>
</section>
<section id="warpaffinetransformer">
<h3><span class="section-number">6.3.34. </span>WarpAffineTransformer<a class="headerlink" href="#warpaffinetransformer" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">ïƒ</a></h3>
<p><strong>è¯´æ˜</strong>ï¼š</p>
<p>ç”¨äºåšå›¾åƒä»¿å°„å˜æ¢çš„æ“ä½œã€‚</p>
<p><strong>å‚æ•°</strong>ï¼š</p>
<ul class="simple">
<li><p>input_shapeï¼šè¾“å…¥çš„shapeå€¼ã€‚</p></li>
<li><p>scaleï¼šä¹˜ä»¥çš„ç³»æ•°ã€‚</p></li>
</ul>
<p><strong>ä½¿ç”¨ä¸¾ä¾‹</strong>ï¼š</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># å¤§å°ä¸º512*512ï¼Œé•¿è¾¹é•¿åº¦ä¸º1.0</span>
WarpAffineTransformer<span class="o">((</span><span class="m">512</span>, <span class="m">512</span><span class="o">)</span>, <span class="m">1</span>.0<span class="o">)</span>
</pre></div>
</div>
</section>
<section id="f32tos8transformer">
<h3><span class="section-number">6.3.35. </span>F32ToS8Transformer<a class="headerlink" href="#f32tos8transformer" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">ïƒ</a></h3>
<p><strong>è¯´æ˜</strong>ï¼š</p>
<p>ç”¨äºåšè¾“å…¥æ ¼å¼ä»float32è½¬æ¢ä¸ºint8çš„æ“ä½œã€‚</p>
<p><strong>å‚æ•°</strong>ï¼šä¸æ¶‰åŠã€‚</p>
<p><strong>ä½¿ç”¨ä¸¾ä¾‹</strong>ï¼š</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># è¾“å…¥æ ¼å¼ä» float32è½¬ä¸º int8</span>
F32ToS8Transformer<span class="o">()</span>
</pre></div>
</div>
</section>
<section id="f32tou8transformer">
<h3><span class="section-number">6.3.36. </span>F32ToU8Transformer<a class="headerlink" href="#f32tou8transformer" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">ïƒ</a></h3>
<p><strong>è¯´æ˜</strong>ï¼š</p>
<p>ç”¨äºåšè¾“å…¥æ ¼å¼ä»float32è½¬æ¢ä¸ºuint8çš„æ“ä½œã€‚</p>
<p><strong>å‚æ•°</strong>ï¼šä¸æ¶‰åŠã€‚</p>
<p><strong>ä½¿ç”¨ä¸¾ä¾‹</strong>ï¼š</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># è¾“å…¥æ ¼å¼ä» float32 è½¬ä¸º uint8</span>
F32ToU8Transformer<span class="o">()</span>
</pre></div>
</div>
</section>
</section>
<section id="id6">
<h2><span class="section-number">6.4. </span>å¸¸è§æ•…éšœå¤„ç†<a class="headerlink" href="#id6" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">ïƒ</a></h2>
<p>æœ¬ç« èŠ‚ä¸ºæ‚¨ä»‹ç»åœ¨ä½¿ç”¨åœ°å¹³çº¿J5å·¥å…·é“¾äº§å“æ—¶ï¼Œæ‚¨å¯èƒ½é‡åˆ°çš„ä¸€äº›å¼‚å¸¸æ•…éšœç°è±¡ã€‚é’ˆå¯¹è¿™äº›æ•…éšœï¼Œæˆ‘ä»¬ä¸ºæ‚¨æä¾›å¯¹åº”æ•…éšœçš„å¯èƒ½åŸå› åŠé€šç”¨è§£å†³å»ºè®®ï¼Œæ–¹ä¾¿æ‚¨å¿«é€Ÿå®šä½é—®é¢˜åŠè§£å†³æ•…éšœã€‚</p>
<section id="hb-mapper-checker">
<h3><span class="section-number">6.4.1. </span>hb_mapper checker å¸¸è§æ•…éšœ<a class="headerlink" href="#hb-mapper-checker" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">ïƒ</a></h3>
<p><strong>èƒŒæ™¯ä¿¡æ¯</strong>ï¼šæ¨¡å‹æ£€æŸ¥å‘½ä»¤ï¼ˆ <code class="docutils literal notranslate"><span class="pre">hb_mapper</span> <span class="pre">checker</span></code> ï¼‰</p>
<p>åœ¨å®é™…å·¥ç¨‹ä¸­ï¼Œç”±äºå¹¶éæ‰€æœ‰æµ®ç‚¹æ¨¡å‹å‡èƒ½å¤Ÿè½¬ä¸ºé‡åŒ–æ¨¡å‹ï¼Œå› æ­¤åœ¨è½¬æ¢ä¹‹å‰éœ€è¦è¿›è¡Œä¸€æ¬¡æ£€æŸ¥ï¼Œè¿™ä¸ªcheckè¿‡ç¨‹ï¼Œä¼šå®Œæˆä¸€éæ¨¡å‹è½¬æ¢çš„è¿‡ç¨‹ï¼Œ
ä½†æ˜¯å¯¹äºæ¯”è¾ƒè€—æ—¶çš„æ­¥éª¤ï¼Œè¿›è¡Œäº†ç®€åŒ–å¤„ç†ã€‚è¯¥å‘½ä»¤åœ¨å®Œæˆæ¨¡å‹çš„æ£€æŸ¥å, ä¼šè¾“å‡ºæ£€æŸ¥ç»“æœå’ŒOPåœ¨è®¾å¤‡ä¸Šçš„éƒ¨ç½²æƒ…å†µã€‚</p>
<p><strong>æ•…éšœåœºæ™¯</strong>ï¼šä»¥ä¸‹ä¸ºåœ¨ä½¿ç”¨ <code class="docutils literal notranslate"><span class="pre">hb_mapper</span> <span class="pre">checker</span></code> æ—¶å¸¸è§çš„æ•…éšœåœºæ™¯ï¼š</p>
<ol class="arabic simple">
<li><p>æ•…éšœç°è±¡ä¸€ï¼š</p></li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ERROR The shape of model input:input is <span class="o">[</span>xxx<span class="o">]</span> which has dimensions of <span class="m">0</span>.
Please specify input-shape parameter.
</pre></div>
</div>
<p>æ•…éšœå¯èƒ½åŸå› ï¼šå‘ç”Ÿæ­¤æ•…éšœçš„åŸå› å¯èƒ½æ˜¯æ¨¡å‹è¾“å…¥ä¸ºåŠ¨æ€shapeã€‚</p>
<p>è§£å†³å»ºè®®ï¼šé’ˆå¯¹æ­¤æ•…éšœï¼Œæ‚¨å¯ä½¿ç”¨å‚æ•° <code class="docutils literal notranslate"><span class="pre">--input-shape</span> <span class="pre">&quot;input_name</span> <span class="pre">input_shape&quot;</span></code> æ¥æŒ‡å®šè¾“å…¥èŠ‚ç‚¹çš„shapeä¿¡æ¯ã€‚</p>
<ol class="arabic simple" start="2">
<li><p>æ•…éšœç°è±¡äºŒï¼š</p></li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ERROR HorizonRT not support these cpu operators: <span class="o">{</span>op_type<span class="o">}</span>
</pre></div>
</div>
<p>æ•…éšœå¯èƒ½åŸå› ï¼šå‘ç”Ÿæ­¤æ•…éšœçš„åŸå› å¯èƒ½æ˜¯ä½¿ç”¨çš„CPUç®—å­ä¸ºåœ°å¹³çº¿ä¸æ”¯æŒçš„CPUç®—å­ã€‚</p>
<p>è§£å†³å»ºè®®ï¼šé’ˆå¯¹æ­¤æ•…éšœï¼Œæ‚¨å¯ä»¥æ ¹æ®æˆ‘ä»¬æä¾›çš„ç®—å­æ”¯æŒåˆ—è¡¨ä¸­çš„å†…å®¹å¯¹ç®—å­è¿›è¡Œæ›¿æ¢ï¼›è‹¥ä¸è¢«æ”¯æŒçš„CPUç®—å­ä¸ºæ¨¡å‹æ ¸å¿ƒç®—å­ï¼Œè¯·æ‚¨è”ç³»åœ°å¹³çº¿å¯¹æ­¤è¿›è¡Œå¼€å‘è¯„ä¼°ã€‚</p>
<ol class="arabic simple" start="3">
<li><p>æ•…éšœç°è±¡ä¸‰ï¼š</p></li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Unsupported op <span class="o">{</span>op_type<span class="o">}</span>
</pre></div>
</div>
<p>æ•…éšœå¯èƒ½åŸå› ï¼šå‘ç”Ÿæ­¤æ•…éšœçš„åŸå› å¯èƒ½æ˜¯ä½¿ç”¨çš„BPUç®—å­ä¸ºåœ°å¹³çº¿ä¸æ”¯æŒçš„BPUç®—å­ã€‚</p>
<p>è§£å†³å»ºè®®ï¼šé’ˆå¯¹æ­¤æ•…éšœï¼Œè‹¥æ¨¡å‹æ•´ä½“æ€§èƒ½å¯æ»¡è¶³éœ€è¦ï¼Œæ‚¨å¯ä»¥å¿½ç•¥è¯¥æ—¥å¿—ï¼›è‹¥æ¨¡å‹æ•´ä½“æ€§èƒ½ä¸èƒ½è¾¾åˆ°æ‚¨çš„é¢„æœŸï¼Œæ‚¨å¯ä»¥æ ¹æ®æˆ‘ä»¬æä¾›çš„ç®—å­æ”¯æŒåˆ—è¡¨ä¸­çš„å†…å®¹å¯¹ç®—å­è¿›è¡Œæ›¿æ¢ã€‚</p>
<ol class="arabic simple" start="4">
<li><p>æ•…éšœç°è±¡å››ï¼š</p></li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ERROR nodes:<span class="o">[</span><span class="s1">&#39;{op_type}&#39;</span><span class="o">]</span> are specified as domain:xxx, which are not supported by official onnx.
Please check whether these ops are official onnx ops or defined by yourself
</pre></div>
</div>
<p>æ•…éšœå¯èƒ½åŸå› ï¼šå‘ç”Ÿæ­¤æ•…éšœçš„åŸå› å¯èƒ½æ˜¯ä½¿ç”¨çš„è‡ªå®šä¹‰ç®—å­ä¸ºåœ°å¹³çº¿ä¸æ”¯æŒçš„è‡ªå®šä¹‰ç®—å­ã€‚</p>
<p>è§£å†³å»ºè®®ï¼šé’ˆå¯¹æ­¤æ•…éšœï¼Œæ‚¨å¯ä»¥æ ¹æ®æˆ‘ä»¬æä¾›çš„ç®—å­æ”¯æŒåˆ—è¡¨ä¸­çš„å†…å®¹å¯¹ç®—å­è¿›è¡Œæ›¿æ¢æˆ–å‚è€ƒ <a class="reference external" href="https://developer.horizon.ai/forumDetail/71036525692881018">åœ°å¹³çº¿å¼€å‘è€…è®ºå›-è‡ªå®šä¹‰ç®—å­å¼€å‘</a> ä¸­çš„å†…å®¹å®Œæˆè‡ªå®šä¹‰CPUç®—å­æ³¨å†Œã€‚</p>
</section>
<section id="hb-mapper-makertbin">
<h3><span class="section-number">6.4.2. </span>hb_mapper makertbinå¸¸è§æ•…éšœ<a class="headerlink" href="#hb-mapper-makertbin" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">ïƒ</a></h3>
<p><strong>èƒŒæ™¯ä¿¡æ¯</strong>ï¼šæ¨¡å‹ç¼–è¯‘å‘½ä»¤ï¼ˆ <code class="docutils literal notranslate"><span class="pre">hb_mapper</span> <span class="pre">makertbin</span></code> ï¼‰</p>
<p>è¯¥å‘½ä»¤æ ¹æ®é…ç½®æ–‡ä»¶å’Œæ¨¡å‹çš„ç§ç±»ï¼Œä¼šç”ŸæˆONNXé‡åŒ–æ¨¡å‹ä»¥åŠä»¿çœŸä¸Šæ¿æƒ…å†µçš„runtimeæ¨¡å‹ã€‚</p>
<p><strong>æ•…éšœåœºæ™¯</strong>ï¼šä»¥ä¸‹ä¸ºåœ¨ä½¿ç”¨ <code class="docutils literal notranslate"><span class="pre">hb_mapper</span> <span class="pre">makertbin</span></code> æ—¶å¸¸è§çš„æ•…éšœåœºæ™¯ï¼š</p>
<ol class="arabic simple">
<li><p>æ•…éšœç°è±¡ä¸€ï¼š</p></li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Layer <span class="o">{</span>op_name<span class="o">}</span>
  xxx expect data shape range:<span class="o">[[</span>xxx<span class="o">][</span>xxx<span class="o">]]</span>, but the data shape is <span class="o">[</span>xxx<span class="o">]</span>
Layer <span class="o">{</span>op_name<span class="o">}</span>
  Tensor xxx expects be n dimensions, but m provided
</pre></div>
</div>
<p>æ•…éšœå¯èƒ½åŸå› ï¼šå‘ç”Ÿæ­¤æ•…éšœçš„åŸå› å¯èƒ½æ˜¯ï¼Œ{op_name}ç®—å­è¶…è¿‡æ”¯æŒé™åˆ¶è¢«å›é€€åˆ°CPUè®¡ç®—ã€‚</p>
<p>è§£å†³å»ºè®®ï¼šé’ˆå¯¹æ­¤æ•…éšœï¼Œè‹¥CPUç®—å­å¸¦æ¥çš„æ€§èƒ½æŸè€—æ‚¨å¯æ¥å—ï¼Œåˆ™æ— éœ€å…³æ³¨è¯¥ä¿¡æ¯ï¼›è‹¥æ€§èƒ½ä¸èƒ½è¾¾åˆ°æ‚¨çš„è¦æ±‚ï¼Œæ‚¨å¯ä»¥æ ¹æ®æˆ‘ä»¬æä¾›çš„ç®—å­æ”¯æŒåˆ—è¡¨ä¸­çš„å†…å®¹å°†è¯¥opä¿®æ”¹è‡³BPUå¯æ”¯æŒçš„èŒƒå›´ã€‚</p>
<ol class="arabic simple" start="2">
<li><p>æ•…éšœç°è±¡äºŒï¼š</p></li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ERROR There is an error <span class="k">in</span> pass: <span class="o">{</span>op_name<span class="o">}</span>. Error message:xxx
</pre></div>
</div>
<p>æ•…éšœå¯èƒ½åŸå› ï¼šå‘ç”Ÿæ­¤æ•…éšœçš„åŸå› å¯èƒ½æ˜¯ï¼Œ{op_name}ç®—å­ä¼˜åŒ–å¤±è´¥ã€‚</p>
<p>è§£å†³å»ºè®®ï¼šé’ˆå¯¹æ­¤æ•…éšœï¼Œè¯·æ‚¨å°†æ¨¡å‹ä»¥åŠ.logæ–‡ä»¶æ”¶é›†å¥½åæä¾›ç»™åœ°å¹³çº¿æŠ€æœ¯äººå‘˜è¿›è¡Œåˆ†æå¤„ç†ã€‚</p>
<ol class="arabic simple" start="3">
<li><p>æ•…éšœç°è±¡ä¸‰ï¼š</p></li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Error There is an error <span class="k">in</span> pass:constant_folding.
Error message: Could not find an implementation <span class="k">for</span> the node <span class="o">{</span>op_name<span class="o">}</span>
</pre></div>
</div>
<p>æ•…éšœå¯èƒ½åŸå› ï¼šå‘ç”Ÿæ­¤æ•…éšœçš„åŸå› å¯èƒ½æ˜¯è¯¥ç®—å­onnxruntimeæš‚æœªæ”¯æŒã€‚</p>
<p>è§£å†³å»ºè®®ï¼šé’ˆå¯¹æ­¤æ•…éšœï¼Œæ‚¨å¯ä»¥æ ¹æ®æˆ‘ä»¬æä¾›çš„ç®—å­æ”¯æŒåˆ—è¡¨ä¸­çš„å†…å®¹å¯¹ç®—å­è¿›è¡Œæ›¿æ¢ï¼Œå¦‚ä¸è¢«æ”¯æŒçš„ç®—å­ä¸ºæ ¸å¿ƒç®—å­ï¼Œè¯·æ‚¨è”ç³»åœ°å¹³çº¿å¯¹æ­¤è¿›è¡Œå¼€å‘è¯„ä¼°ã€‚</p>
<ol class="arabic simple" start="4">
<li><p>æ•…éšœç°è±¡å››ï¼š</p></li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Start to parse the onnx model
core dump
</pre></div>
</div>
<p>æ•…éšœå¯èƒ½åŸå› ï¼šå‘ç”Ÿæ­¤æ•…éšœçš„åŸå› å¯èƒ½æ˜¯æ¨¡å‹è§£æå¤±è´¥ï¼ˆå¯èƒ½æ˜¯å¯¼å‡ºæ¨¡å‹æ—¶åªä¸ºä¸€ä¸ªoutput/inputèŠ‚ç‚¹æŒ‡å®šäº†nameï¼‰ã€‚</p>
<p>è§£å†³å»ºè®®ï¼šé’ˆå¯¹æ­¤æ•…éšœï¼Œå»ºè®®æ‚¨é‡æ–°å¯¼å‡ºonnxå¹¶ç¡®è®¤å…¶æœ‰æ•ˆæ€§ï¼ˆå¯¼å‡ºonnxæ¨¡å‹æ—¶ä¸æŒ‡å®šoutput/input nameï¼Œæˆ–è€…ä¾æ¬¡ä¸ºæ¯ä¸ªoutput/inputèŠ‚ç‚¹æŒ‡å®šåç§°ï¼‰ã€‚</p>
<ol class="arabic simple" start="5">
<li><p>æ•…éšœç°è±¡äº”ï¼š</p></li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Start to calibrate/quantize the model
core dump

Start to compile the model
core dump
</pre></div>
</div>
<p>æ•…éšœå¯èƒ½åŸå› ï¼šå‘ç”Ÿæ­¤æ•…éšœçš„åŸå› å¯èƒ½æ˜¯æ¨¡å‹é‡åŒ–/ç¼–è¯‘å¤±è´¥ã€‚</p>
<p>è§£å†³å»ºè®®ï¼šé’ˆå¯¹æ­¤æ•…éšœï¼Œè¯·æ‚¨å°†æ¨¡å‹ä»¥åŠ.logæ–‡ä»¶æ”¶é›†å¥½åæä¾›ç»™åœ°å¹³çº¿æŠ€æœ¯äººå‘˜è¿›è¡Œåˆ†æå¤„ç†ã€‚</p>
<ol class="arabic simple" start="6">
<li><p>æ•…éšœç°è±¡å…­ï¼š</p></li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ERROR model conversion faild: Inferred shape and existing shape differ <span class="k">in</span> dimension x: <span class="o">(</span>n<span class="o">)</span> vs <span class="o">(</span>m<span class="o">)</span>
</pre></div>
</div>
<p>æ•…éšœå¯èƒ½åŸå› ï¼šå‘ç”Ÿæ­¤æ•…éšœçš„åŸå› å¯èƒ½æ˜¯onnxæ¨¡å‹çš„è¾“å…¥shapeéæ³•ï¼Œæˆ–è€…æ˜¯å·¥å…·ä¼˜åŒ–passæœ‰è¯¯ã€‚</p>
<p>è§£å†³å»ºè®®ï¼šé’ˆå¯¹æ­¤æ•…éšœï¼Œè¯·æ‚¨ç¡®ä¿onnxæ¨¡å‹çš„æœ‰æ•ˆæ€§ï¼Œè‹¥onnxæ¨¡å‹å¯æ­£å¸¸æ¨ç†ï¼Œè¯·å°†æ¨¡å‹æä¾›ç»™åœ°å¹³çº¿æŠ€æœ¯äººå‘˜è¿›è¡Œåˆ†æå¤„ç†ã€‚</p>
<ol class="arabic simple" start="7">
<li><p>æ•…éšœç°è±¡ä¸ƒï¼š</p></li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>WARNING got unexpected input/output/sumin threshold on conv <span class="o">{</span>op_name<span class="o">}</span>! value: xxx
</pre></div>
</div>
<p>æ•…éšœå¯èƒ½åŸå› ï¼šå‘ç”Ÿæ­¤æ•…éšœçš„åŸå› å¯èƒ½æ˜¯æ•°æ®é¢„å¤„ç†æœ‰è¯¯ï¼Œæˆ–è¯¥èŠ‚ç‚¹weightå€¼å¤ªå°/å¤ªå¤§ã€‚</p>
<p>è§£å†³å»ºè®®ï¼šé’ˆå¯¹æ­¤æ•…éšœï¼Œè¯·æ‚¨æ£€æŸ¥æ•°æ®é¢„å¤„ç†æ˜¯å¦æœ‰è¯¯ï¼›æˆ‘ä»¬å»ºè®®æ‚¨ä½¿ç”¨BNç®—å­ä¼˜åŒ–æ•°æ®åˆ†å¸ƒã€‚</p>
<ol class="arabic simple" start="8">
<li><p>æ•…éšœç°è±¡å…«ï¼š</p></li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ERROR hbdk-cc compile hbir model failed with returncode -n
</pre></div>
</div>
<p>æ•…éšœå¯èƒ½åŸå› ï¼šå‘ç”Ÿæ­¤æ•…éšœçš„åŸå› å¯èƒ½æ˜¯æ¨¡å‹ç¼–è¯‘å¤±è´¥ã€‚</p>
<p>è§£å†³å»ºè®®ï¼šé’ˆå¯¹æ­¤æ•…éšœï¼Œè¯·æ‚¨å°†æ¨¡å‹ä»¥åŠ.logæ–‡ä»¶æ”¶é›†å¥½åæä¾›ç»™åœ°å¹³çº¿æŠ€æœ¯äººå‘˜è¿›è¡Œåˆ†æå¤„ç†ã€‚</p>
<ol class="arabic simple" start="9">
<li><p>æ•…éšœç°è±¡ä¹ï¼š</p></li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ERROR <span class="o">{</span>op_type<span class="o">}</span>  only support <span class="m">4</span> dim input
</pre></div>
</div>
<p>æ•…éšœå¯èƒ½åŸå› ï¼šå‘ç”Ÿæ­¤æ•…éšœçš„åŸå› å¯èƒ½æ˜¯å·¥å…·é“¾æš‚ä¸æ”¯æŒè¯¥opè¾“å…¥ç»´åº¦ä¸ºéå››ç»´ã€‚</p>
<p>è§£å†³å»ºè®®ï¼šé’ˆå¯¹æ­¤æ•…éšœï¼Œæˆ‘ä»¬å»ºè®®æ‚¨å°†è¯¥opè¾“å…¥ç»´åº¦è°ƒæ•´ä¸ºå››ç»´è¾“å…¥ã€‚</p>
<ol class="arabic simple" start="10">
<li><p>æ•…éšœç°è±¡åï¼š</p></li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ERROR <span class="o">{</span>op_type<span class="o">}</span> Not support this attribute/mode<span class="o">=</span>xxx
</pre></div>
</div>
<p>æ•…éšœå¯èƒ½åŸå› ï¼šå‘ç”Ÿæ­¤æ•…éšœçš„åŸå› å¯èƒ½æ˜¯å·¥å…·é“¾æš‚ä¸æ”¯æŒopçš„è¯¥å±æ€§ã€‚</p>
<p>è§£å†³å»ºè®®ï¼šé’ˆå¯¹æ­¤æ•…éšœï¼Œæ‚¨å¯ä»¥æ ¹æ®æˆ‘ä»¬æä¾›çš„ç®—å­æ”¯æŒåˆ—è¡¨ä¸­çš„å†…å®¹è¿›è¡Œæ›¿æ¢æˆ–è”ç³»åœ°å¹³çº¿å¯¹æ­¤è¿›è¡Œå¼€å‘è¯„ä¼°ã€‚</p>
<ol class="arabic simple" start="11">
<li><p>æ•…éšœç°è±¡åä¸€ï¼š</p></li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ERROR There is no node can execute on BPU <span class="k">in</span> this model,
please make sure the model has at least one conv node which is supported by BPU.
</pre></div>
</div>
<p>æ•…éšœå¯èƒ½åŸå› ï¼šå‘ç”Ÿæ­¤æ•…éšœçš„åŸå› å¯èƒ½æ˜¯æ¨¡å‹ä¸­æ²¡æœ‰å¯é‡åŒ–çš„BPUèŠ‚ç‚¹ã€‚</p>
<p>è§£å†³å»ºè®®ï¼šé’ˆå¯¹æ­¤æ•…éšœï¼Œè¯·æ‚¨ç¡®ä¿onnxæ¨¡å‹çš„æœ‰æ•ˆæ€§ï¼Œä¸”æ¨¡å‹ä¸­è‡³å°‘ä½¿ç”¨äº†ä¸€ä¸ªconvï¼›è‹¥å‰è¿°æ¡ä»¶å‡å·²æ»¡è¶³ï¼Œè¯·æ‚¨å°†æ¨¡å‹ä»¥åŠ.logæ–‡ä»¶æ”¶é›†å¥½åæä¾›ç»™åœ°å¹³çº¿æŠ€æœ¯äººå‘˜è¿›è¡Œåˆ†æå¤„ç†ã€‚</p>
<ol class="arabic simple" start="12">
<li><p>æ•…éšœç°è±¡åäºŒï¼š</p></li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ERROR The opset version of the onnx model is n, only model with opset_version <span class="m">10</span>/11 is supported
</pre></div>
</div>
<p>æ•…éšœå¯èƒ½åŸå› ï¼šå‘ç”Ÿæ­¤æ•…éšœçš„åŸå› å¯èƒ½æ˜¯æ¨¡å‹opsetç‰ˆæœ¬è¶…å‡ºå·¥å…·é“¾æ”¯æŒé™åˆ¶ã€‚</p>
<p>è§£å†³å»ºè®®ï¼šé’ˆå¯¹æ­¤æ•…éšœï¼Œè¯·æ‚¨é‡æ–°å¯¼å‡ºæ¨¡å‹ï¼Œç¡®ä¿opset_version=10æˆ–è€…11ã€‚</p>
<ol class="arabic simple" start="13">
<li><p>æ•…éšœç°è±¡åä¸‰ï¼š</p></li>
</ol>
<p><strong>åœ¨ä½¿ç”¨run_on_bpuåè½¬æ¢æŠ¥é”™ã€‚</strong></p>
<p>æ•…éšœå¯èƒ½åŸå› ï¼šå‘ç”Ÿæ­¤æ•…éšœçš„åŸå› å¯èƒ½æ˜¯ç›®å‰æš‚ä¸æ”¯æŒå°†è¯¥ç®—å­run_on_bpuã€‚</p>
<p>è§£å†³å»ºè®®ï¼šrun_on_bpuæš‚ä»…æ”¯æŒæŒ‡å®šæ¨¡å‹å°¾éƒ¨çš„Relu/Softmax/poolingï¼ˆmaxpoolã€avgpoolç­‰ï¼‰ç®—å­ä»¥åŠCPU*+Transposeç»„åˆï¼ˆå¯é€šè¿‡å£°æ˜TransposeèŠ‚ç‚¹åç§°ï¼Œå°†CPU*+Transposeéƒ½è¿è¡Œåœ¨BPUä¸Šï¼ŒCPU*ç‰¹æŒ‡BPUæ”¯æŒçš„opï¼‰ï¼Œ
è‹¥æ»¡è¶³å‰è¿°æ¡ä»¶ä½†ä»run_on_bpuå¤±è´¥ï¼Œè¯·æ‚¨è”ç³»åœ°å¹³çº¿æŠ€æœ¯äººå‘˜å¯¹æ­¤è¿›è¡Œåˆ†æå¤„ç†ï¼›è‹¥ä¸æ»¡è¶³å‰è¿°æ¡ä»¶ï¼Œå¯è”ç³»åœ°å¹³çº¿æŠ€æœ¯äººå‘˜å¯¹æ­¤è¿›è¡Œå¼€å‘è¯„ä¼°ã€‚</p>
<ol class="arabic simple" start="14">
<li><p>æ•…éšœç°è±¡åå››ï¼š</p></li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ERROR unsupported model: BAYES not support excute one model on 2core simultaneously now
</pre></div>
</div>
<p>æ•…éšœå¯èƒ½åŸå› ï¼šå‘ç”Ÿæ­¤æ•…éšœçš„åŸå› æ˜¯J5ç›®å‰æš‚ä¸æ”¯æŒç¼–è¯‘åŒæ ¸æ¨¡å‹ã€‚</p>
<p>è§£å†³å»ºè®®ï¼šé’ˆå¯¹æ­¤æ•…éšœï¼Œå»ºè®®æ‚¨å°†yamlé…ç½®æ–‡ä»¶ä¸­çš„core_numè®¾ç½®ä¸º1ã€‚</p>
<ol class="arabic simple" start="15">
<li><p>æ•…éšœç°è±¡åäº”ï¼š</p></li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ERROR tool limits <span class="k">for</span> max output num is <span class="m">32</span>
</pre></div>
</div>
<p>æ•…éšœå¯èƒ½åŸå› ï¼šå‘ç”Ÿæ­¤æ•…éšœçš„åŸå› å¯èƒ½æ˜¯å·¥å…·é“¾ä»…æ”¯æŒæ¨¡å‹è¾“å‡ºèŠ‚ç‚¹æ•°é‡ä¸è¶…è¿‡32ã€‚</p>
<p>è§£å†³å»ºè®®ï¼šé’ˆå¯¹æ­¤æ•…éšœï¼Œå»ºè®®æ‚¨å°†æ¨¡å‹è¾“å‡ºèŠ‚ç‚¹æ•°é‡æ§åˆ¶åœ¨32ä¸ªä»¥å†…ã€‚</p>
</section>
<section id="hb-model-modifier">
<h3><span class="section-number">6.4.3. </span>hb_model_modifierå¸¸è§æ•…éšœ<a class="headerlink" href="#hb-model-modifier" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">ïƒ</a></h3>
<p><strong>èƒŒæ™¯ä¿¡æ¯</strong>ï¼š <code class="docutils literal notranslate"><span class="pre">hb_model_modifier</span></code> å·¥å…·ç”¨äºå¯¹æŒ‡å®šçš„runtimeæ¨¡å‹ä¸­è¾“å…¥ç«¯çš„Transposeã€QuantizeèŠ‚ç‚¹å’Œè¾“å‡ºç«¯çš„Transposeã€Dequantiã€Castã€Reshapeã€softmaxèŠ‚ç‚¹è¿›è¡Œåˆ é™¤æ“ä½œï¼Œ
å¹¶å°†åˆ é™¤èŠ‚ç‚¹çš„ä¿¡æ¯å­˜æ”¾åœ¨BINæ¨¡å‹ä¸­ï¼Œå¯ä»¥é€šè¿‡ hb_model_info è¿›è¡ŒæŸ¥çœ‹ã€‚</p>
<p><strong>æ•…éšœåœºæ™¯</strong>ï¼šä»¥ä¸‹ä¸ºåœ¨ä½¿ç”¨ <code class="docutils literal notranslate"><span class="pre">hb_model_modifier</span></code> æ—¶å¸¸è§çš„æ•…éšœåœºæ™¯ï¼š</p>
<p>æ•…éšœç°è±¡ï¼š</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ERROR Can not find value info <span class="o">{</span>op_name<span class="o">}</span>
</pre></div>
</div>
<p>æ•…éšœå¯èƒ½åŸå› ï¼šè¯¥é—®é¢˜ä¸ºåœ°å¹³çº¿å·²çŸ¥é—®é¢˜ï¼ŒäºOE1.1.14ç‰ˆæœ¬è¿›è¡Œäº†ä¿®å¤ã€‚</p>
<p>è§£å†³å»ºè®®ï¼šé’ˆå¯¹æ­¤æ•…éšœï¼Œè¯·æ‚¨å®Œæ•´æ›´æ–°OEå¼€å‘åŒ…æˆ–å°†horizon-tc-uiå‡çº§è‡³1.7.8ã€‚</p>
</section>
<section id="hb-model-verifier">
<h3><span class="section-number">6.4.4. </span>hb_model_verifierå¸¸è§æ•…éšœ<a class="headerlink" href="#hb-model-verifier" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">ïƒ</a></h3>
<p><strong>èƒŒæ™¯ä¿¡æ¯</strong>ï¼š <code class="docutils literal notranslate"><span class="pre">hb_model_verifier</span></code> å·¥å…·æ˜¯ç”¨äºå¯¹æŒ‡å®šçš„å®šç‚¹æ¨¡å‹å’Œruntimeæ¨¡å‹è¿›è¡Œç»“æœéªŒè¯çš„å·¥å…·ã€‚
è¯¥å·¥å…·ä¼šä½¿ç”¨æŒ‡å®šå›¾ç‰‡ï¼Œè¿›è¡Œå®šç‚¹æ¨¡å‹æ¨ç†ï¼Œruntimeæ¨¡å‹æ¿ç«¯å’Œx86ç«¯æ¨¡æ‹Ÿå™¨ä¸Šçš„æ¨ç†ï¼Œå¹¶å¯¹å…¶ä¸‰æ–¹çš„ç»“æœè¿›è¡Œä¸¤ä¸¤æ¯”è¾ƒï¼Œç»™å‡ºæ˜¯å¦é€šè¿‡çš„ç»“è®ºã€‚</p>
<p><strong>æ•…éšœåœºæ™¯</strong>ï¼šä»¥ä¸‹ä¸ºåœ¨ä½¿ç”¨ <code class="docutils literal notranslate"><span class="pre">hb_model_verifier</span></code> æ—¶å¸¸è§çš„æ•…éšœåœºæ™¯ï¼š</p>
<ol class="arabic simple">
<li><p>æ•…éšœç°è±¡ä¸€ï¼š</p></li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ERROR Arm result does not exist, program halted
</pre></div>
</div>
<p>æ•…éšœå¯èƒ½åŸå› ï¼šå‘ç”Ÿæ­¤æ•…éšœåï¼Œæ‚¨å¯æŸ¥çœ‹ç»ˆç«¯æ‰§è¡Œæ—¥å¿—ç›¸å…³æç¤ºï¼Œä¸€èˆ¬åŸå› ä¸ºæ¿å­è¿æ¥å¤±è´¥æˆ–æ¿ç«¯æ¨ç†å¤±è´¥ã€‚</p>
<p>è§£å†³å»ºè®®ï¼šé’ˆå¯¹æ­¤æ•…éšœï¼Œè‹¥æŸ¥çœ‹åˆ°è¿æ¥å¤±è´¥çš„ç›¸å…³æç¤ºï¼Œè¯·æ‚¨å†æ¬¡ç¡®è®¤åœ¨å½“å‰ç¯å¢ƒä¸­æ˜¯å¦å¯pingé€šå¼€å‘æ¿ï¼›
è‹¥ç›¸å…³æç¤ºä¸ºæ¿ç«¯æ¨ç†å¤±è´¥ï¼Œå¯é€šè¿‡åœ¨æ¿ç«¯çš„ <code class="docutils literal notranslate"><span class="pre">/userdata/model_verifier_test</span></code> è·¯å¾„ä¸‹æ‰§è¡Œ <code class="docutils literal notranslate"><span class="pre">infer.sh</span></code> æ¥æŸ¥çœ‹æ¨ç†å¤±è´¥çš„å…·ä½“åŸå› ã€‚</p>
<ol class="arabic simple" start="2">
<li><p>æ•…éšœç°è±¡äºŒï¼š</p></li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ERROR Quanti onnx and Arm result Strict check FAILED
</pre></div>
</div>
<p>æ•…éšœå¯èƒ½åŸå› ï¼šå‘ç”Ÿæ­¤æ•…éšœçš„åŸå› å¯èƒ½æ˜¯æ¨¡å‹ä¸€è‡´æ€§æ¯”å¯¹å¤±è´¥ã€‚</p>
<p>è§£å†³å»ºè®®ï¼šé’ˆå¯¹æ­¤æ•…éšœï¼Œè¯·æ‚¨å°†æ¨¡å‹æä¾›ç»™åœ°å¹³çº¿æŠ€æœ¯äººå‘˜è¿›è¡Œåˆ†æå¤„ç†ã€‚</p>
</section>
<section id="hb-onnxruntime">
<h3><span class="section-number">6.4.5. </span>hb_onnxruntimeå¸¸è§æ•…éšœ<a class="headerlink" href="#hb-onnxruntime" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">ïƒ</a></h3>
<p><strong>èƒŒæ™¯ä¿¡æ¯</strong>ï¼š <code class="docutils literal notranslate"><span class="pre">hb_onnxruntime</span></code> ä¸»è¦æ˜¯ç”¨äºonnxæ¨¡å‹æ¨ç†çš„ç±»ã€‚</p>
<p><strong>æ•…éšœåœºæ™¯</strong>ï¼šä»¥ä¸‹ä¸ºåœ¨ä½¿ç”¨ <code class="docutils literal notranslate"><span class="pre">hb_onnxruntime</span></code> æ—¶å¸¸è§çš„æ•…éšœåœºæ™¯ï¼š</p>
<p>æ•…éšœç°è±¡ï¼š</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ERROR <span class="o">[</span>ONNXRuntimeError<span class="o">]</span> : <span class="m">2</span>ï¼šINVALID_ARGUMENT : Unexpected input data type.
Actual: <span class="o">(</span>N11onnxruntime17PrimitiveDataTypexxx<span class="o">)</span>, expected: <span class="o">(</span>N11onnxruntime17PrimitiveDataTypexxx<span class="o">)</span>
</pre></div>
</div>
<p>æ•…éšœå¯èƒ½åŸå› ï¼šå‘ç”Ÿæ­¤æ•…éšœçš„åŸå› å¯èƒ½æ˜¯è¾“å…¥æ•°æ®æ ¼å¼ä¸æ¨¡å‹ä¸åŒ¹é…ã€‚</p>
<p>è§£å†³å»ºè®®ï¼šé’ˆå¯¹æ­¤æ•…éšœï¼Œä¸€èˆ¬æ¥è¯´æµ®ç‚¹onnxæ¨¡å‹çš„è¾“å…¥æ ¼å¼ä¸ºfloat32ï¼Œé‡åŒ–åæ¨¡å‹è¾“å…¥æ ¼å¼ä¸ºint8ã€‚å¯ä½¿ç”¨å¯è§†åŒ–å·¥å…·æŸ¥çœ‹onnxæ¨¡å‹inputèŠ‚ç‚¹çš„å±æ€§ã€‚</p>
</section>
<section id="libdnn">
<h3><span class="section-number">6.4.6. </span>libDNNå¸¸è§æ•…éšœ<a class="headerlink" href="#libdnn" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">ïƒ</a></h3>
<p><strong>èƒŒæ™¯ä¿¡æ¯</strong>ï¼š <code class="docutils literal notranslate"><span class="pre">libDNN</span></code> ä¸»è¦æ˜¯ç”¨äºåœ°å¹³çº¿æ¨¡å‹çš„æ¨ç†åº“ã€‚</p>
<p><strong>æ•…éšœåœºæ™¯</strong>ï¼šä»¥ä¸‹ä¸ºåœ¨ä½¿ç”¨ <code class="docutils literal notranslate"><span class="pre">libDNN</span></code> æ—¶å¸¸è§çš„æ•…éšœåœºæ™¯ï¼š</p>
<ol class="arabic simple">
<li><p>æ•…éšœç°è±¡ä¸€ï¼š</p></li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">(</span>common.h:79<span class="o">)</span>: HR:ERROR: op_name:xxx invalid attr key xxx
</pre></div>
</div>
<p>æ•…éšœå¯èƒ½åŸå› ï¼šå‘ç”Ÿæ­¤æ•…éšœçš„åŸå› å¯èƒ½æ˜¯libDNNæš‚ä¸æ”¯æŒè¯¥opçš„æŸä¸ªå±æ€§ï¼ˆåç»­æˆ‘ä»¬å°†é€æ­¥æŠŠç®—å­çº¦æŸå‰ç§»è‡³æ¨¡å‹è½¬æ¢é˜¶æ®µæé†’ï¼‰ã€‚</p>
<p>è§£å†³å»ºè®®ï¼šé’ˆå¯¹æ­¤æ•…éšœï¼Œæ‚¨å¯ä»¥æ ¹æ®æˆ‘ä»¬æä¾›çš„ç®—å­æ”¯æŒåˆ—è¡¨ä¸­çš„å†…å®¹è¿›è¡Œæ›¿æ¢æˆ–è”ç³»åœ°å¹³çº¿å¯¹æ­¤è¿›è¡Œå¼€å‘è¯„ä¼°ã€‚</p>
<ol class="arabic simple" start="2">
<li><p>æ•…éšœç°è±¡äºŒï¼š</p></li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">(</span>hb_dnn_ndarray.cpp:xxx<span class="o">)</span>: data <span class="nb">type</span> of ndarray <span class="k">do</span> not match specified type. NDArray dtype_: n, givenï¼šm
</pre></div>
</div>
<p>æ•…éšœå¯èƒ½åŸå› ï¼šå‘ç”Ÿæ­¤æ•…éšœçš„åŸå› å¯èƒ½æ˜¯libDNNæš‚ä¸æ”¯æŒè¯¥è¾“å…¥ç±»å‹ï¼ˆåç»­æˆ‘ä»¬å°†é€æ­¥æŠŠç®—å­çº¦æŸå‰ç§»è‡³æ¨¡å‹è½¬æ¢é˜¶æ®µæé†’ï¼‰ã€‚</p>
<p>è§£å†³å»ºè®®ï¼šé’ˆå¯¹æ­¤æ•…éšœï¼Œæ‚¨å¯ä»¥æ ¹æ®æˆ‘ä»¬æä¾›çš„ç®—å­æ”¯æŒåˆ—è¡¨ä¸­çš„å†…å®¹è¿›è¡Œæ›¿æ¢æˆ–è”ç³»åœ°å¹³çº¿å¯¹æ­¤è¿›è¡Œå¼€å‘è¯„ä¼°ã€‚</p>
<ol class="arabic simple" start="3">
<li><p>æ•…éšœç°è±¡ä¸‰ï¼š</p></li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">(</span>validate_util.cpp:xxx<span class="o">)</span>ï¼štensor aligned shape size is xxx , but tensor hbSysMem memSize is xxx,
tensor hbSysMem memSize should &gt;<span class="o">=</span> tensor aligned shape size!
</pre></div>
</div>
<p>æ•…éšœå¯èƒ½åŸå› ï¼šå‘ç”Ÿæ­¤æ•…éšœçš„åŸå› å¯èƒ½æ˜¯è¾“å…¥æ•°æ®ç”³è¯·å†…å­˜ä¸è¶³ã€‚</p>
<p>è§£å†³å»ºè®®ï¼šé’ˆå¯¹æ­¤æ•…éšœï¼Œç”±äºä½¿ç”¨hrt_model_exec model_infoæŸ¥çœ‹æ¨¡å‹inputèŠ‚ç‚¹çš„aligned shapeï¼Œæ˜¯æŒ‰aligned shape*size_of(tensor type)æ¥ç”³è¯·å†…å­˜ç©ºé—´çš„ã€‚
æ­¤å¤„æˆ‘ä»¬å»ºè®®ï¼šè‹¥æ‚¨çš„libDNNç‰ˆæœ¬é«˜äº1.5.4bï¼Œå»ºè®®ç›´æ¥ä½¿ç”¨hbDNNTensorProperties.alignedByteSizeæ¥ç”³è¯·å†…å­˜ç©ºé—´ï¼Œè‹¥æ‚¨çš„libDNNç‰ˆæœ¬ä½äº1.5.4bç‰ˆæœ¬åˆ™ç›´æ¥ä½¿ç”¨aligned*sizeæ¥ç”³è¯·å†…å­˜ç©ºé—´ã€‚</p>
<ol class="arabic simple" start="4">
<li><p>æ•…éšœç°è±¡å››ï¼š</p></li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">(</span>bpu_model_info.cpp:xxx<span class="o">)</span>: HR:ERROR: hbm model input feature names must be equal to graph node input names
</pre></div>
</div>
<p>æ•…éšœå¯èƒ½åŸå› ï¼šè¯¥é—®é¢˜ä¸ºåœ°å¹³çº¿å·²çŸ¥é—®é¢˜ï¼Œå±äºhb_model_modiferå·¥å…·å·²çŸ¥é—®é¢˜ï¼Œå·²äºOE1.1.14ç‰ˆæœ¬è¿›è¡Œäº†ä¿®å¤ã€‚</p>
<p>è§£å†³å»ºè®®ï¼šé’ˆå¯¹æ­¤æ•…éšœï¼Œè¯·æ‚¨å®Œæ•´æ›´æ–°OEå¼€å‘åŒ…æˆ–å°†horizon-tc-uiå‡çº§è‡³1.7.8ç‰ˆæœ¬ã€‚</p>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="dsp.html" class="btn btn-neutral float-left" title="5. DSPå¼€å‘æ–‡æ¡£" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> ä¸Šä¸€é¡µ</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; ç‰ˆæƒæ‰€æœ‰ 2022, Horizon Robotics.</p>
  </div>

  åˆ©ç”¨ <a href="https://www.sphinx-doc.org/">Sphinx</a> æ„å»ºï¼Œä½¿ç”¨äº† 
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">ä¸»é¢˜</a>
    ç”± <a href="https://readthedocs.org">Read the Docs</a>å¼€å‘.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>